/*!
* WeatherCube - v2.2.2019
* https://mcx-systems.com/weatherCube
*
* All rights Reserved.
* Copyrights by Davorin Casar <casardavorin@gmail.com> (https://mcx-systems.net)
*/
(function(n,t,i,r){function y(t,i){this.element=t;this._name=s;this._version="V2.2.2019";this._flag=!1;this._language=this.getUserLanguage();this._locationLat=null;this._locationLon=null;this._weatherIntervalId=null;this._dataResult=[];this._windy=null;this._windyMap=null;this._tempChart=null;this._humidityChart=null;this._pressureChart=null;this._windChart=null;this._tempWeekChart=null;this._humidityWeekChart=null;this._pressureWeekChart=null;this._earthquakeChart=null;this._earthquakesArray=u.layerGroup();this._uId=this.createUniqId(8);this._timezone=-((new Date).getTimezoneOffset()/60);this._defaults=n.fn.weatherCube.defaults;this.options=n.extend({},this._defaults,i);let r=this;if(u.Browser.ielt9){alert(getI18n("weatherCube_browserError",r.options.language));return}if(!r.options.apiKey||r.options.apiKey===""){alert(getI18n("weatherCube_apiKeyError",r.options.language));console.warn(getI18n("weatherCube_apiKeyError",r.options.language));console.error(getI18n("weatherCube_apiError",r.options.language));return}if(r.options.language||(r.options.language=r._language),(n.isEmptyObject(r.options.firstTimezone)||r.options.firstTimezone==="")&&(r.options.firstTimezone=r._defaults.firstTimezone),(n.isEmptyObject(r.options.secondTimezone)||r.options.secondTimezone==="")&&(r.options.secondTimezone=r._defaults.secondTimezone),r.options.debug&&(console.info("--------------------------------------------"),console.info(r.capitalizeFirstLetter(r._name)+" Info")),n(r.element).append(r.createWeatherWidget()),n(r.element).addClass("weatherCube-"+r.options.theme+"Theme"),n(r.element).find("#weatherCube-overlay-"+r._uId).empty().append(r.createWeatherLoader()),n(r.element).find("#weatherCube-footerLoader-"+r._uId).css("color","rgb(183, 26, 0)"),n(r.element).find("#weatherCube-loaderText-"+r._uId).text(getI18n("weatherCube_getLocation",r.options.language)),n(r.element).find(".beaufortScaleModal, #weatherTab-"+r._uId+" a").tooltip({animation:!0,trigger:"hover"}),n(r.element).find("#currentWeatherInterval-"+r._uId).carousel({interval:r.options.alertsInterval,pause:"hover"}),setInterval(()=>{r.setClocksTime(r)},1e3),r.setClocksTime(r),r.getIPLocation(),r.options.latitude&&r.options.longitude)r._locationLat=r.options.latitude,r._locationLon=r.options.longitude,r.options.debug&&(console.info("--------------------------------------------"),console.info("Location is set to user input."),console.info("--------------------------------------------")),n(r.element).find("#weatherCube-latitude-"+r._uId).text(r._locationLat),n(r.element).find("#weatherCube-longitude-"+r._uId).text(r._locationLon),n(r.element).find("#weatherCube-loaderText-"+r._uId).text(getI18n("weatherCube_getLocationSuccess",r.options.language)),r._flag||(r.init(),r._flag=!0);else if(navigator.geolocation)let t=navigator.geolocation.watchPosition(function(i){(r._locationLat!==i.coords.latitude.toFixed(3)||r._locationLon!==i.coords.longitude.toFixed(3))&&(r._locationLat=i.coords.latitude.toFixed(3),r._locationLon=i.coords.longitude.toFixed(3),n(r.element).find("#weatherCube-latitude-"+r._uId).text(r._locationLat),n(r.element).find("#weatherCube-longitude-"+r._uId).text(r._locationLon),r._flag||(n(r.element).find("#weatherCube-loaderText-"+r._uId).text(getI18n("weatherCube_getLocationSuccess",r.options.language)),r.options.debug&&(console.info("--------------------------------------------"),console.info("Location was detected and was set automatically."),console.info("--------------------------------------------")),setTimeout(function(){r.init()},1e3),r._flag=!0),navigator.geolocation.clearWatch(t))},function(i){r.locationErrorCallback(i);r._locationLat=46.6623;r._locationLon=16.1711;n(r.element).find("#weatherCube-latitude-"+r._uId).text(46.6623);n(r.element).find("#weatherCube-longitude-"+r._uId).text(16.1711);n(r.element).find("#weatherCube-loaderText-"+r._uId).text(getI18n("weatherCube_getLocationError",r.options.language));r._flag||(r.init(),r._flag=!0);navigator.geolocation.clearWatch(t)},{highAccuracy:!0,maximumAge:4e4,timeout:2e4});else alert(getI18n("weatherCube_geoError",this.options.language)),r.options.debug&&(console.info("--------------------------------------------"),console.info("Location was not found nor detected and was set to default."),console.info("Geolocation is not supported by this browser."),console.info("--------------------------------------------")),r._locationLat=46.6623,r._locationLon=16.1711,n(r.element).find("#weatherCube-latitude-"+r._uId).text(r._locationLat),n(r.element).find("#weatherCube-longitude-"+r._uId).text(r._locationLon),n(r.element).find("#weatherCube-loaderText-"+r._uId).text(getI18n("weatherCube_getLocationError",r.options.language)),r._flag||(r.init(),r._flag=!0)}let u=L.noConflict();const s="weatherCube";let p="https://api.sat24.com/mostrecent/{0}/{1}",w="https://api.sat24.com/animated/{0}/{1}/{2}/{3}/{4}";const a=["visual","infraPolair","rainTMC","snow"],v=["visual5hdcomplete","infraPolair","rainTMC","snow"],b=["DE","SP","FR","ALPS","IT","SCAN","GB","PL","GR","TU","RU","BA","BC","SE","HU","UK","EU","CE","NG","CAF","TD","CG","EG","ET","CM","IS","LY","MG","MO","BW","SA","SO","SD","TZ","TN","WA","ZM","ZA","KE","AO","EA","AF","ID","TH","MY","PG","KR","KP","LA","SEASIA","NZ","OCE","AU","ANA","AMA","ASA","JP"],k=["AT","BA","BE","BO","CH","CY","CZ","DE","EE","ES","FI","FR","GR","HR","HU","IE","IL","IS","IT","LT","LU","LV","MD","ME","MK","MT","NL","NO","PL","PT","RO","RS","SE","SI","SK","UK"];let d="https://www.meteoalarm.eu/documents/rss/{0}.rss",f="https://api.openweathermap.org/data/2.5/weather",o="https://api.openweathermap.org/data/2.5/uvi/forecast",e="https://api.openweathermap.org/data/2.5/forecast",h="https://api.usno.navy.mil/rstt/oneday",c="https://api.usno.navy.mil/eclipses/solar",l="https://api.usno.navy.mil/seasons",g="https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/2.5_{0}.geojson";n.extend(y.prototype,{init:function(){let i=this;i.buildCache();i.bindEvents();i.options.debug&&(console.info("--------------------------------------------"),console.info(i.capitalizeFirstLetter(i._name)+" "+i._version+" successfully initialized and is ready."),console.info("Latitude set to: "+i._locationLat),console.info("Longitude set to: "+i._locationLon),console.info("Language is set to: "+i.options.language),console.info("Units are set to: "+i.options.units),console.info("Uniq ID generated: "+i._uId),console.info("Current time is: "+i.formatTime(n.now(),0)),console.info("Current time is: "+i.formatTime(n.now(),2)),console.info("Current time is: "+i.formatTime(n.now())),console.info("Current timezone is set to: "+i._timezone),console.info("Current timezone name is: "+i.getTimezoneName()),console.info("--------------------------------------------"),console.info("--------------------------------------------"));i._tempChart=t.echarts.init(i.$element.find("#weatherTempChart-"+i._uId)[0],i.options.theme);i._tempChart.showLoading();i._humidityChart=t.echarts.init(i.$element.find("#weatherHumidityChart-"+i._uId)[0],i.options.theme);i._humidityChart.showLoading();i._pressureChart=t.echarts.init(i.$element.find("#weatherPressureChart-"+i._uId)[0],i.options.theme);i._pressureChart.showLoading();i._windChart=t.echarts.init(i.$element.find("#weatherWindChart-"+i._uId)[0],i.options.theme);i._windChart.showLoading();i._tempWeekChart=t.echarts.init(i.$element.find("#weatherWeekTempChart-"+i._uId)[0],i.options.theme);i._tempWeekChart.showLoading();i._humidityWeekChart=t.echarts.init(i.$element.find("#weatherWeekHumidityChart-"+i._uId)[0],i.options.theme);i._humidityWeekChart.showLoading();i._pressureWeekChart=t.echarts.init(i.$element.find("#weatherWeekPressureChart-"+i._uId)[0],i.options.theme);i._pressureWeekChart.showLoading();i._windWeekChart=t.echarts.init(i.$element.find("#weatherWeekWindChart-"+i._uId)[0],i.options.theme);i._windWeekChart.showLoading();i._earthquakeChart=t.echarts.init(i.$element.find("#weatherQuakeChart-"+i._uId)[0],i.options.theme);i._earthquakeChart.showLoading();n(t).bind("resize",function(){i._tempChart.resize();i._humidityChart.resize();i._pressureChart.resize();i._windChart.resize();i._tempWeekChart.resize();i._humidityWeekChart.resize();i._pressureWeekChart.resize();i._windWeekChart.resize();i._earthquakeChart.resize();i._weatherMap.invalidateSize()});i.initWeather()},initWeather:function(){let n=this;this.getWeatherMeteoAlarmData();n.options.city?(f+="?q="+encodeURIComponent(n.options.city),e+="?q="+encodeURIComponent(n.options.city)):n.options.latitude&&n.options.longitude?(f+="?lat="+n.options.latitude+"&lon="+n.options.longitude,e+="?lat="+n.options.latitude+"&lon="+n.options.longitude):(f+="?lat="+n._locationLat+"&lon="+n._locationLon,e+="?lat="+n._locationLat+"&lon="+n._locationLon);o+=n.options.latitude&&n.options.longitude?"?lat="+n.options.latitude+"&lon="+n.options.longitude:"?lat="+n._locationLat+"&lon="+n._locationLon;n.options.units!==null&&(f+="&units="+n.options.units,e+="&units="+n.options.units);n.options.apiKey!==null&&(f+="&appid="+n.options.apiKey,o+="&appid="+n.options.apiKey,e+="&appid="+n.options.apiKey);n.options.language!==null&&(f+="&lang="+n.options.language,e+="&lang="+n.options.language);n.options.debug&&(console.info("--------------------------------------------"),console.info("OpenWeatherMAp api url's are constructed and ready!."),console.info("--------------------------------------------"));n.createWeatherMap();let t,i,r,u;n._locationLat<0?(t=-1*n._locationLat,r="SOUTH"):(t=n._locationLat,r="NORTH");n._locationLon<0?(i=-1*n._locationLon,u="WEST"):(i=n._locationLon,u="EAST");let s="&lat="+t+"&ns="+r+"&lon="+i+"&ew="+u;setTimeout(function(){n.$element.find("#weatherCube-loaderText-"+n._uId).text(getI18n("weatherCube_getDataFeeds",n.options.language));n.$element.find("#imagesContainer-"+n._uId).append(n.createWeatherSatImages(n._uId));setTimeout(function(){n.$element.find("#weatherCube-loaderText-"+n._uId).text(getI18n("weatherCube_getDataFeeds",n.options.language));n.$element.find("#weatherCubeEarthImage-"+n._uId).attr("src","https://www.fourmilab.ch/cgi-bin/Earth?img=NASA500m.evif&imgsize=240&dynimg=y&opt=-l"+s+"&alt=35785&date=0");n.getWeatherCurrentData();setTimeout(function(){n.getWeatherForecastData();setTimeout(function(){n.getWeatherAstronomyData();setTimeout(function(){n.getWeatherQuakesData()},500)},500)},500)},500)},500);n._weatherIntervalId||(n._weatherIntervalId=setInterval(function(){n.$element.find("#weatherCubeEarthImage-"+n._uId).attr("src","https://www.fourmilab.ch/cgi-bin/Earth?img=NASA500m.evif&imgsize=240&dynimg=y&opt=-l"+s+"&alt=35785&date=0");n.$element.find("#weatherCube-loaderText-"+n._uId).text(getI18n("weatherCube_getDataFeeds",n.options.language));n.$element.find("#imagesContainer-"+n._uId).append(n.createWeatherSatImages(n._uId));setTimeout(function(){n.$element.find("#weatherCube-loaderText-"+n._uId).text(getI18n("weatherCube_getDataFeeds",n.options.language));n.getWeatherCurrentData();setTimeout(function(){n.getWeatherForecastData();setTimeout(function(){n.getWeatherAstronomyData();setTimeout(function(){n.getWeatherQuakesData()},500)},500)},500)},500)},n.options.wInterval))},createWeatherWidget:function(){return'<div id="weatherCube-'+this._uId+'" class="card weatherCube rounded-0">'+this.createWeatherHeader()+this.createWeatherNavigation()+this.createWeatherMain()+this.createWeatherFooter()+"<\/div>"},createWeatherMain:function(){return'<main class="weatherCube-main tab-content p-0 m-0 rounded-0"><div id="tabWeatherCurrent-'+this._uId+'" class="weatherCurrentTab tab-pane fade show active" role="tabpanel" aria-labelledby="tabWeatherCurrentToggle-'+this._uId+'"><div class="row no-gutters"><div class="col-md-6 weatherCubeCurrentBackground"><div id="weatherCube-overlay-'+this._uId+'" class="weatherCube-loader-overlay"><\/div><div class="media p-3"><div id="weatherCube-currentForecastImage-'+this._uId+'"><\/div><div class="media-body weatherCubeDayBody text-right overflow-hidden"><span class="font-weight-bold mr-3">'+getI18n("weatherCube_currentForecastToday",this.options.language)+'<\/span><div class="weatherCubeCurrentTemperature d-flex justify-content-end align-items-center mr-3 mt-2"><span id="weatherCube-currentTemperatureIcon-'+this._uId+'"><\/span><span id="weatherCube-currentTemperature-'+this._uId+'" class="digital-numbers pb-2 pb-sm-1 h1">--<\/span><i class="wi '+this.generateUnitIcon(this.options.units)+' pb-4 h3" aria-hidden="true"><\/i><\/div><div class="weatherCubeMinMaxTemperature d-flex justify-content-end flex-sm-wrap flex-lg-nowrap align-items-center mr-1"><span class="mr-1 pb-1">'+getI18n("weatherCube_currentForecastMin",this.options.language)+'<\/span><span id="weatherCube-currentMinTemperature-'+this._uId+'" class="digital-numbers mr-1 pb-1">--<\/span><i class="wi '+this.generateUnitIcon(this.options.units)+' pb-2 mr-2" aria-hidden="true"><\/i><span class="mr-1 pb-1">'+getI18n("weatherCube_currentForecastMax",this.options.language)+'<\/span><span id="weatherCube-currentMaxTemperature-'+this._uId+'" class="digital-numbers mr-1 pb-1">--<\/span><i class="wi '+this.generateUnitIcon(this.options.units)+' pb-2 mr-2" aria-hidden="true"><\/i><\/div><div class="weatherCubeMinMaxTemperature d-flex justify-content-end align-items-center mt-3 mr-2"><a id="weatherCube-uviIndexTable-'+this._uId+'" href="#" class="pt-3"><span class="mr-2 font-weight-bold">'+getI18n("weatherCube_currentForecastUvi",this.options.language)+'<\/span><\/a><img id="weatherCube-uviIndexImage-'+this._uId+'" src="" class="mt-3 mr-2" alt="" title="UV-index" /><\/div><div id="weatherCube-currentMore-'+this._uId+'" class="card-content d-flex p-2 pt-4"><\/div><\/div><\/div><div class="weatherCube-desc font-weight-bold mt-auto text-center p-2"><span id="weatherCube-currentDescription-'+this._uId+'" class="font-weight-bold">---------<\/span><\/div><\/div><div class="col-md-6 p-0 weatherCubeTimeBackground"><div class="weatherCube-desc font-weight-bold mt-auto text-left p-2"><div id="weatherCube-spinner-'+this._uId+'" class="spinner-border spinner-border-sm text-danger mb-1" role="status"><\/div><span id="weatherCube-loaderText-'+this._uId+'" class="font-weight-bold small ml-3"><\/span><\/div><div class="d-flex flex-row align-items-center"><div class="alert alert-primary d-flex flex-column text-left ml-2 mt-3 p-2"><samp class="font-weight-bold small p-1">'+getI18n("weatherCube_latitude",this.options.language)+'<span id="weatherCube-latitude-'+this._uId+'" class="digital-numbers ml-2 badge badge-danger">--.---<\/span><i class="wi wi-degrees wi-fw" aria-hidden="true"><\/i><\/samp><samp class="font-weight-bold small p-1">'+getI18n("weatherCube_longitude",this.options.language)+'<span id="weatherCube-longitude-'+this._uId+'" class="digital-numbers ml-2 badge badge-danger">--.---<\/span><i class="wi wi-degrees wi-fw" aria-hidden="true"><\/i><\/samp><hr /><samp class="font-weight-bold small p-1">'+getI18n("weatherCube_city",this.options.language)+'<span id="weatherCube-city-'+this._uId+'" class="ml-2 badge badge-danger">-------------<\/span><\/samp><samp class="font-weight-bold p-1 small">'+getI18n("weatherCube_state",this.options.language)+'<span id="weatherCube-state-'+this._uId+'" class="ml-2 badge badge-danger">---<\/span><\/samp><samp class="font-weight-bold p-1 small">'+getI18n("weatherCube_country",this.options.language)+'<span id="weatherCube-country-'+this._uId+'" class="ml-2 badge badge-danger">---<\/span><\/samp><\/div><div class="ml-auto h-100 pb-3 pt-2 pr-3 text-center"><span class="badge badge-danger">'+getI18n("weatherCube_local",this.options.language)+'<\/span><a href="#" class="weatherCube-timeTable"><div class="weatherCube-clock mt-3"><div class="outer-clock-face"><div class="inner-clock-face"><div class="hand wcLocal-hours-hand"><\/div><div class="hand wcLocal-minutes-hand"><\/div><div class="hand wcLocal-seconds-hand"><\/div><\/div><\/div><\/div><\/a><\/div><div class="ml-auto h-100 pb-3 pt-2 pr-3 d-none d-xl-block text-center"><span class="badge badge-danger">'+this.options.firstTimezone[0]+'<\/span><a href="#" class="weatherCube-timeTable"><div class="weatherCube-clock mt-3"><div class="outer-clock-face"><div class="inner-clock-face"><div class="hand wcFirst-hours-hand"><\/div><div class="hand wcFirst-minutes-hand"><\/div><div class="hand wcFirst-seconds-hand"><\/div><\/div><\/div><\/div><\/a><\/div><div class="ml-auto h-100 pb-3 pt-2 pr-3 d-none d-xl-block text-center"><span class="badge badge-danger">'+this.options.secondTimezone[0]+'<\/span><a href="#" class="weatherCube-timeTable"><div class="weatherCube-clock mt-3"><div class="outer-clock-face"><div class="inner-clock-face"><div class="hand wcSecond-hours-hand"><\/div><div class="hand wcSecond-minutes-hand"><\/div><div class="hand wcSecond-seconds-hand"><\/div><\/div><\/div><\/div><\/a><\/div><\/div><\/div><\/div><\/div><div id="tabWeatherHour-'+this._uId+'" class="weatherHourTab tab-pane fade" role="tabpanel" aria-labelledby="tabWeatherHourToggle-'+this._uId+'"><div id="weatherHoursArea-'+this._uId+'" class="d-flex flex-wrap overflow-hidden text-center"><\/div><\/div><div id="tabWeatherDay-'+this._uId+'" class="weatherDayTab tab-pane fade" role="tabpanel" aria-labelledby="tabWeatherDayToggle-'+this._uId+'"><div id="weatherDaysArea-'+this._uId+'" class="d-flex flex-wrap overflow-hidden text-center"><\/div><\/div><div id="tabWeatherUvi-'+this._uId+'" class="weatherUviTab tab-pane fade" role="tabpanel" aria-labelledby="tabWeatherUviToggle-'+this._uId+'"><\/div><div id="tabWeatherSat-'+this._uId+'" class="weatherSatTab tab-pane fade" role="tabpanel" aria-labelledby="tabWeatherSatToggle-'+this._uId+'"><div id="imagesContainer-'+this._uId+'" class="row no-gutters"><\/div><\/div><div id="tabWeatherMoon-'+this._uId+'" class="weatherMoonTab tab-pane fade" role="tabpanel" aria-labelledby="tabWeatherMoonToggle-'+this._uId+'">'+this.createWeatherMoonData()+'<\/div><div id="tabWeatherQuake-'+this._uId+'" class="weatherQuakeTab tab-pane fade" role="tabpanel" aria-labelledby="tabWeatherQuakeToggle-'+this._uId+'"><div class="row no-gutters"><div id="weatherQuakeChart-'+this._uId+'" class="weatherCube-quakeChart col-xl-5 col-lg-6 col-md-12 p-2"><\/div><div id="weatherQuakesArea-'+this._uId+'" class="weatherCube-quakes col-xl-7 col-lg-6 col-md-12 p-1"><\/div><\/div><\/div><div id="tabWeatherChart-'+this._uId+'" class="weatherChartTab tab-pane fade" role="tabpanel" aria-labelledby="tabWeatherChartToggle-'+this._uId+'"><div class="row no-gutters"><div class="col-sm-12 col-md-6 col-xl-3"><div id="weatherTempChart-'+this._uId+'" class="weatherChart p-2"><\/div><\/div><div class="col-sm-12 col-md-6 col-xl-3"><div id="weatherHumidityChart-'+this._uId+'" class="weatherChart p-2"><\/div><\/div><div class="col-sm-12 col-md-6 col-xl-3"><div id="weatherPressureChart-'+this._uId+'" class="weatherChart p-2"><\/div><\/div><div class="col-sm-12 col-md-6 col-xl-3"><div id="weatherWindChart-'+this._uId+'" class="weatherChart p-2"><\/div><\/div><\/div><div class="row no-gutters"><div class="col-sm-12 col-md-6 col-xl-3"><div id="weatherWeekTempChart-'+this._uId+'" class="weatherChart p-2"><\/div><\/div><div class="col-sm-12 col-md-6 col-xl-3"><div id="weatherWeekHumidityChart-'+this._uId+'" class="weatherChart p-2"><\/div><\/div><div class="col-sm-12 col-md-6 col-xl-3"><div id="weatherWeekPressureChart-'+this._uId+'" class="weatherChart p-2"><\/div><\/div><div class="col-sm-12 col-md-6 col-xl-3"><div id="weatherWeekWindChart-'+this._uId+'" class="weatherChart p-2"><\/div><\/div><\/div><\/div><div id="tabWeatherMap-'+this._uId+'" class="weatherMapTab tab-pane fade" role="tabpanel" aria-labelledby="tabWeatherMapToggle-'+this._uId+'"><div class="weatherCube-content"><div class="d-flex"><div id="weatherCube-map-'+this._uId+'" class="weatherCube-map flex-fill text-left"><\/div><div class="weatherCube-scrollbarArea d-block d-lg-none"><\/div><\/div><\/div><\/div><div id="tabWeatherSun-'+this._uId+'" class="weatherMapTab tab-pane fade" role="tabpanel" aria-labelledby="tabWeatherSunToggle-'+this._uId+'">'+this.createWeatherSunContent()+'<\/div><div id="tabWeatherWind-'+this._uId+'" class="weatherWindTab tab-pane fade" role="tabpanel" aria-labelledby="tabWeatherWindToggle-'+this._uId+'">'+this.createWeatherWindMap()+'<\/div><div id="tabWeatherSpace-'+this._uId+'" class="weatherSpaceTab tab-pane fade" role="tabpanel" aria-labelledby="tabWeatherSpaceToggle-'+this._uId+'">'+this.createWeatherSpaceImages()+'<\/div><div id="tabWeatherPlanets-'+this._uId+'" class="weatherPlanetsTab tab-pane fade" style="background-color: black" role="tabpanel" aria-labelledby="tabWeatherPlanetsToggle-'+this._uId+'"><div class="row no-gutters"><div class="col-md-12"><img src="data:image/png;base64,'+getImage("space")+'" class="img-fluid" alt="Solar System Image" /><\/div><div id="weatherCube-planetsTable-'+this._uId+'" class="col-md-12 table-responsive"><\/div><\/div><\/div><\/main>'},createWeatherNavigation:function(){return'<nav class="weatherCube-navigation"><ul id="weatherTab-'+this._uId+'" class="nav justify-content-between" role="tablist"><li class="nav-item"><a id="tabWeatherCurrentToggle-'+this._uId+'" title="'+getI18n("weatherCube_viewCurrent",this.options.language)+'" href="#tabWeatherCurrent-'+this._uId+'" role="tab" aria-controls="tabWeatherCurrent-'+this._uId+'" aria-selected="true" class="nav-link active"><i class="wi wi-day-sunny" aria-hidden="true"><\/i><\/a><\/li><li class="nav-item"><a id="tabWeatherHourToggle-'+this._uId+'" title="'+getI18n("weatherCube_viewHours",this.options.language)+'" href="#tabWeatherHour-'+this._uId+'" role="tab" aria-controls="tabWeatherHour-'+this._uId+'" aria-selected="false" class="nav-link"><i class="wi wi-time-5" aria-hidden="true"><\/i><\/a><\/li><li class="nav-item"><a id="tabWeatherDayToggle-'+this._uId+'" title="'+getI18n("weatherCube_viewDays",this.options.language)+'" href="#tabWeatherDay-'+this._uId+'" role="tab" aria-controls="tabWeatherDay-'+this._uId+'" aria-selected="true" class="nav-link"><i class="wi wi-rain-wind" aria-hidden="true"><\/i><\/a><\/li><li class="nav-item d-none d-sm-block"><a id="tabWeatherUviToggle-'+this._uId+'" title="'+getI18n("weatherCube_viewUvi",this.options.language)+'" href="#tabWeatherUvi-'+this._uId+'" role="tab" aria-controls="tabWeatherUvi-'+this._uId+'" aria-selected="false" class="nav-link"><i class="wi wi-umbrella" aria-hidden="true"><\/i><\/a><\/li><li class="nav-item"><a id="tabWeatherSatToggle-'+this._uId+'" title="'+getI18n("weatherCube_viewSat",this.options.language)+'" href="#tabWeatherSat-'+this._uId+'" role="tab" aria-controls="tabWeatherSat-'+this._uId+'" aria-selected="false" class="nav-link"><i class="wi wi-lightning" aria-hidden="true"><\/i><\/a><\/li><li class="nav-item"><a id="tabWeatherMoonToggle-'+this._uId+'" title="'+getI18n("weatherCube_viewMoon",this.options.language)+'" href="#tabWeatherMoon-'+this._uId+'" role="tab" aria-controls="tabWeatherMoon-'+this._uId+'" aria-selected="false" class="nav-link"><i class="wi wi-moon-waxing-crescent-3" aria-hidden="true"><\/i><\/a><\/li><li class="nav-item"><a id="tabWeatherQuakeToggle-'+this._uId+'" title="'+getI18n("weatherCube_viewQuakes",this.options.language)+'" href="#tabWeatherQuake-'+this._uId+'" role="tab" aria-controls="tabWeatherQuake-'+this._uId+'" aria-selected="false" class="nav-link"><i class="wi wi-earthquake" aria-hidden="true"><\/i><\/a><\/li><li class="nav-item"><a id="tabWeatherChartToggle-'+this._uId+'" title="'+getI18n("weatherCube_viewCharts",this.options.language)+'" href="#tabWeatherChart-'+this._uId+'" role="tab" aria-controls="tabWeatherChart-'+this._uId+'" aria-selected="false" class="nav-link"><i class="wi wi-snowflake-cold" aria-hidden="true"><\/i><\/a><\/li><li class="nav-item"><a id="tabWeatherMapToggle-'+this._uId+'" title="'+getI18n("weatherCube_viewMaps",this.options.language)+'" href="#tabWeatherMap-'+this._uId+'" role="tab" aria-controls="tabWeatherMap-'+this._uId+'" aria-selected="false" class="nav-link"><i class="wi wi-smoke" aria-hidden="true"><\/i><\/a><\/li><li class="nav-item"><a id="tabWeatherSunToggle-'+this._uId+'" title="'+getI18n("weatherCube_viewSun",this.options.language)+'" href="#tabWeatherSun-'+this._uId+'" role="tab" aria-controls="tabWeatherSun-'+this._uId+'" aria-selected="false" class="nav-link"><i class="wi wi-hot" aria-hidden="true"><\/i><\/a><\/li><li class="nav-item"><a id="tabWeatherWindToggle-'+this._uId+'" title="'+getI18n("weatherCube_viewWind",this.options.language)+'" href="#tabWeatherWind-'+this._uId+'" role="tab" aria-controls="tabWeatherWind-'+this._uId+'" aria-selected="false" class="nav-link"><i class="wi wi-strong-wind" aria-hidden="true"><\/i><\/a><\/li><li class="nav-item"><a id="tabWeatherSpaceToggle-'+this._uId+'" title="'+getI18n("weatherCube_viewSpace",this.options.language)+'" href="#tabWeatherSpace-'+this._uId+'" role="tab" aria-controls="tabWeatherSpace-'+this._uId+'" aria-selected="false" class="nav-link"><i class="wi wi-stars" aria-hidden="true"><\/i><\/a><\/li><li class="nav-item"><a id="tabWeatherPlanetsToggle-'+this._uId+'" title="'+getI18n("weatherCube_viewPlanets",this.options.language)+'" href="#tabWeatherPlanets-'+this._uId+'" role="tab" aria-controls="tabWeatherPlanets-'+this._uId+'" aria-selected="false" class="nav-link"><i class="wi wi-moon-full" aria-hidden="true"><\/i><\/a><\/li><\/ul><\/nav>'},createWeatherHeader:function(){return'<header class="weatherCube-header rounded-0 card-header d-flex flex-row align-items-center p-2"><div class="weatherCube-header-logo font-weight-bold d-flex flex-row align-items-center"><img src="data:image/png;base64,'+getImage(!1,!1)+'" alt="'+getI18n("weatherCube_title",this.options.language)+'" class="mr-2" /><span class="card-text">'+getI18n("weatherCube_title",this.options.language)+'<\/span><\/div><div id="currentWeatherInterval-'+this._uId+'" class="weatherCube-header-carousel carousel slide font-weight-bold ml-auto mr-2" data-ride="carousel"><div class="carousel-inner"><div class="spinner-border spinner-border-sm text-danger mb-1" role="status"><\/div><\/div><\/div><\/header>'},createWeatherFooter:function(){return'<footer class="weatherCube-footer rounded-0 text-left card-footer d-flex align-items-center flex-wrap-reverse p-2"><samp class="weatherCube-footer-powered font-weight-bold small text-left mr-1">'+getI18n("weatherCube_powered",this.options.language)+'&nbsp;<a href="#" id="weatherCubeInfoToggle-'+this._uId+'">'+this.capitalizeFirstLetter(this._name)+'<\/a>.<\/samp><samp id="weatherCube-detectedIP-'+this._uId+'" class="mr-auto font-weight-bold small"><\/samp><div class="weatherCube-footer-updated d-flex flex-row align-items-center font-weight-bold mr-2"><i class="wi wi-time-4 w-wi-fw mr-2" aria-hidden="true"><\/i><samp class="small font-weight-bold mr-3">'+getI18n("weatherCube_updated",this.options.language)+'&nbsp;<b id="weatherCube-update-'+this._uId+'">00:00&nbsp;-&nbsp;00-00-0000<\/b><\/samp><div id="weatherCube-footerLoader-'+this._uId+'" class="spinner-grow spinner-grow-sm" role="status"><\/div><\/div><\/footer>'},createWeatherMoonData:function(){return'<div class="row no-gutters overflow-hidden"><div class="weatherCube-moonSeasons col-lg-12 col-xl-6"><div class="d-flex"><img id="weatherCube-seasonsImage-'+this._uId+'" src="" class="img-fluid d-none d-lg-block" alt="" /><div class="alert flex-fill align-items-stretch rounded-0 m-0 text-center p-2" role="alert"><h5 class="alert-heading text-warning">'+getI18n("weatherCube_earthSeasons",this.options.language)+'<\/h5><div id="weatherCube-seasonsTable-'+this._uId+'" class="table-responsive"><\/div><hr class="mb-0 pb-0" /><div class="d-flex justify-content-around align-items-center"><img id="weatherCubeEarthImage-'+this._uId+'" src="#" class="img-fluid" alt="Earth" /><div class="alert rounded-0 alert-info mt-auto mb-0" role="alert"><h4 class="alert-heading text-warning">'+getI18n("weatherCube_earthSolar",this.options.language)+'<\/h4><p id="currentEclipsesData-'+this._uId+'"><\/p><\/div><\/div><\/div><\/div><\/div><div class="weatherCube-moonDesc col-lg-12 col-xl-6 text-center d-flex flex-column align-self-stretch p-2"><h5 class="alert-heading text-warning">'+getI18n("weatherCube_moonPhase",this.options.language)+'<\/h5><div id="weatherCube-moonTable-'+this._uId+'" class="table-responsive"><\/div><div class="row"><div class="col-md-8 alert rounded-0 alert-success" role="alert"><div class="d-flex justify-content-between align-items-center"><div id="weatherMoon-'+this._uId+'"><\/div><div class="d-flex flex-column"><h5 class="alert-heading text-warning">'+getI18n("weatherCube_moonPhaseToday",this.options.language)+'<\/h5><br /><p class="h4 text-danger" id="currentMoonPhase-'+this._uId+'"><\/p><span class="h5">'+getI18n("weatherCube_moonFracillum",this.options.language)+'<b class="digital-numbers ml-2" id="currentMoonFracillum-'+this._uId+'"><\/b><\/span><\/div><\/div><hr class="m-0 p-0 mb-1"><div class="d-flex justify-content-between"><span><span class="card-text">'+getI18n("weatherCube_earthMoon",this.options.language)+'<\/span><\/span><span class="ml-auto"><span class="card-text">'+getI18n("weatherCube_earthSun",this.options.language)+'<\/span><\/span><\/div><div class="d-flex justify-content-between"><span class="pb-1 pt-1"><i class="wi wi-moonrise wi-fw mr-1" aria-hidden="true"><\/i><span class="digital-numbers" id="moonRise-'+this._uId+'"><\/span><\/span><span class="ml-auto pb-1 pt-1"><i class="wi wi-sunrise wi-fw mr-1" aria-hidden="true"><\/i><span class="digital-numbers" id="sunRise-'+this._uId+'"><\/span><\/span><\/div><div class="d-flex justify-content-between"><span class="pb-1 pt-1"><i class="wi wi-moonset wi-fw mr-1" aria-hidden="true"><\/i><span class="digital-numbers" id="moonSet-'+this._uId+'"><\/span><\/span><span class="ml-auto pb-1 pt-1"><i class="wi wi-sunset wi-fw mr-1" aria-hidden="true"><\/i><span class="digital-numbers" id="sunSet-'+this._uId+'"><\/span><\/span><\/div><\/div><div class="col-md-4"><h5 class="alert-heading">'+getI18n("weatherCube_earthAstrology",this.options.language)+'<\/h5><div id="weatherCube-astronomyTable-'+this._uId+'" class="table-responsive text-center"><\/div><\/div><\/div><\/div><div class="weatherCube-moonCalendar table-responsive col-md-12 d-none d-xl-block"><table id="moonCalendar-'+this._uId+'" class="weatherCube-moonTable text-white table table-sm t table-striped table-borderless w-100 m-0"><thead><\/thead><tbody><\/tbody><\/table><\/div><\/div>'},createWeatherSunContent:function(){return'<div class="row no-gutters"><div class="weatherCube-moonSeasons col-sm-6 col-md-3"><a target="_blank" href="https://sohodata.nascom.nasa.gov/cgi-bin/data_query_search_url?Session=web&Resolution=2&Display=Images&NumImg=30&Types=instrument=EIT:wavelength=171"><img src="https://sohowww.nascom.nasa.gov/data/realtime/eit_171/512/latest.jpg" class="img-fluid" alt="eit_171" /><\/a><\/div><div class="weatherCube-moonSeasons col-sm-6 col-md-3"><a target="_blank" href="https://sohodata.nascom.nasa.gov/cgi-bin/data_query_search_url?Session=web&Resolution=2&Display=Images&NumImg=30&Types=instrument=EIT:wavelength=195"><img src="https://sohowww.nascom.nasa.gov/data/realtime/eit_195/512/latest.jpg" class="img-fluid" alt="eit_195" /><\/a><\/div><div class="weatherCube-moonSeasons col-sm-6 col-md-3"><a target="_blank" href="https://sohodata.nascom.nasa.gov/cgi-bin/data_query_search_url?Session=web&Resolution=2&Display=Images&NumImg=30&Types=instrument=EIT:wavelength=284"><img src="https://sohowww.nascom.nasa.gov/data/realtime/eit_284/512/latest.jpg" class="img-fluid" alt="eit_284" /><\/a><\/div><div class="weatherCube-moonSeasons col-sm-6 col-md-3"><a target="_blank" href="https://sohodata.nascom.nasa.gov/cgi-bin/data_query_search_url?Session=web&Resolution=2&Display=Images&NumImg=30&Types=instrument=EIT:wavelength=304"><img src="https://sohowww.nascom.nasa.gov/data/realtime/eit_304/512/latest.jpg" class="img-fluid" alt="eit_304" /><\/a><\/div><div class="weatherCube-moonSeasons col-md-12 text-center"><div class="alert alert-info" role="alert"><h4 class="alert-heading font-weight-bold">'+getI18n("weatherCube_sunImages",this.options.language)+"<\/h4><p>"+getI18n("weatherCube_sunLeg",this.options.language)+'<\/p><hr /><p class="mb-0">'+getI18n("weatherCube_sunDesc",this.options.language)+"<\/p><\/div><\/div><\/div>"},createWeatherWindMap:function(){return'<div id="windy"><\/div>'},createWeatherSpaceImages:function(){return'<div class="row text-center no-gutters"><div class="col-md-12 col-lg-6 col-xl-3"><img id="spaceImage-0-'+this._uId+'" src="" class="img-fluid" alt="Space Image North" /><\/div><div class="col-md-12 col-lg-6 col-xl-3"><img id="spaceImage-1-'+this._uId+'" src="" class="img-fluid" alt="Space Image NorthEast" /><\/div><div class="col-md-12 col-lg-6 col-xl-3"><img id="spaceImage-2-'+this._uId+'" src="" class="img-fluid" alt="Space Image East" /><\/div><div class="col-md-12 col-lg-6 col-xl-3"><img id="spaceImage-3-'+this._uId+'" src="" class="img-fluid" alt="Space Image SouthEast" /><\/div><div class="col-md-12 col-lg-6 col-xl-3"><img id="spaceImage-4-'+this._uId+'" src="" class="img-fluid" alt="Space Image South" /><\/div><div class="col-md-12 col-lg-6 col-xl-3"><img id="spaceImage-5-'+this._uId+'" src="" class="img-fluid" alt="Space Image SouthWest" /><\/div><div class="col-md-12 col-lg-6 col-xl-3"><img id="spaceImage-6-'+this._uId+'" src="" class="img-fluid" alt="Space Image West" /><\/div><div class="col-md-12 col-lg-6 col-xl-3"><img id="spaceImage-7-'+this._uId+'" src="" class="img-fluid" alt="Space Image NorthWest" /><\/div><\/div>'},createWeatherInfoModal:function(){return'<div class="modal fade" id="weatherCubeInfo-'+this._uId+'" tabindex="-1" role="dialog" aria-labelledby="weatherCubeInfoModal-'+this._uId+'" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content rounded-0"><header class="modal-header bg-danger rounded-0 p-2"><h6 class="modal-title text-warning font-weight-bold" id="weatherCubeInfoModal-'+this._uId+'">'+getI18n("weatherCube_vendors",this.options.language)+'<\/h6><\/header><div class="modal-body bg-dark"><div class="media"><div class="media-body weatherInfoContent d-flex align-items-center"><div class="pt-2"><a href="https://en.sat24.com/en/" title="Sat24"><img src="data:image/png;base64,'+getImage("weatherInfo",1)+'" class="img-fluid weatherInfoImage" alt="Sat24" /><\/a><a href="https://www.esri.com/en-us/home" title="Esri"><img src="data:image/png;base64,'+getImage("weatherInfo",2)+'" class="img-fluid weatherInfoImage" alt="Esri" /><\/a><a href="https://openweathermap.org/" title="OpenWeatherMap"><img src="data:image/png;base64,'+getImage("weatherInfo",3)+'" class="img-fluid weatherInfoImage" alt="OpenWeatherMap" /><\/a><br /><a href="https://www.meteoalarm.eu/" title="MeteoAlarm"><img src="data:image/png;base64,'+getImage("weatherInfo",4)+'" class="img-fluid weatherInfoImage" alt="MeteoAlarm" /><\/a><a href="https://www.usgs.gov/" title="USGS"><img src="data:image/png;base64,'+getImage("weatherInfo",5)+'" class="img-fluid weatherInfoImage" alt="USGS" /><\/a><a href="https://www.usno.navy.mil/" title="US Navy"><img src="data:image/png;base64,'+getImage("weatherInfo",6)+'" class="img-fluid weatherInfoImage" alt="US Navy" /><\/a><\/div><\/div><a href="https://mcx-systems.net" title="MCX-Systems" target="_blank"><img src="data:image/png;base64,'+getImage("weatherInfo",0)+'" alt="MCX-Systems" /><\/a><\/div><\/div>'+this.createWeatherModalCopyright()+"<\/div><\/div>"},createWeatherVersionModal:function(){return'<div class="modal fade" id="weatherCubeVersion-'+this._uId+'" tabindex="-1" role="dialog" aria-labelledby="weatherCubeInfoVersion-'+this._uId+'" aria-hidden="true"><div class="modal-dialog" role="document"><div class="modal-content rounded-0"><header class="modal-header bg-danger rounded-0 p-2"><h6 class="modal-title text-warning font-weight-bold" id="weatherCubeInfoVersion-'+this._uId+'">'+this.capitalizeFirstLetter(this._name)+"&nbsp;"+this._version+'<\/h6><\/header><div class="modal-body text-white font-weight-bold bg-dark"><div class="d-flex align-items-center"><div class="text-left ml-2"><h5 class="font-weight-bold"><a href="https://jquery.com" class="ml-auto" title="Go to jquery.com" target="_blank">Jquery<\/a>:&nbsp;<span id="versionJQuery-'+this._uId+'" class="text-warning"><\/span><\/h5><h5 class="font-weight-bold"><a href="https://getbootstrap.com" class="ml-auto" title="Go to getbootstrap.com" target="_blank">Bootstrap<\/a>:&nbsp;<span id="versionBootstrap-'+this._uId+'" class="text-warning"><\/span><\/h5><h5 class="font-weight-bold"><a href="https://leafletjs.com" class="ml-auto" title="Go to leafletjs.com" target="_blank">Leaflet<\/a>:&nbsp;<span id="versionLeaflet-'+this._uId+'" class="text-warning"><\/span><\/h5><h5 class="font-weight-bold"><a href="https://echarts.apache.org" class="ml-auto" title="Go to echarts.apache.org" target="_blank">ECharts<\/a>:&nbsp;<span id="versionECharts-'+this._uId+'" class="text-warning"><\/span><\/h5><\/div><a href="https://weathercube.mcx-systems.com" class="ml-auto" title="WeatherCube" target="_blank"><img src="data:image/png;base64,'+getImage(!1,!1)+'" alt="WeatherCube" /><\/a><\/div><\/div>'+this.createWeatherModalCopyright()+"<\/div><\/div><\/div>"},createWeatherAlertsModal:function(){return'<div class="weatherCube-modal modal fade" id="weatherCubeAlerts-'+this._uId+'" tabindex="-1" role="dialog" aria-labelledby="weatherCubeAlerts-'+this._uId+'" aria-hidden="true"><div class="modal-dialog modal-full" role="document"><div class="modal-content alert-weather rounded-0"><div class="modal-body font-weight-bold small d-flex align-self-stretch flex-column"><div id="alertsInterval-'+this._uId+'" class="weatherCube-alertsCarousel carousel slide" data-interval="true" data-ride="carousel" data-interval="4000"> <div id="weatherCube-alertsCarousel-'+this._uId+'" class="carousel-inner"><\/div><\/div><footer class="d-flex justify-content-end align-items-center rounded-0 p-2"><button type="button" class="btn btn-info btn-sm" data-dismiss="modal">'+getI18n("weatherCube_close",this.options.language)+"<\/button><\/footer><\/div><\/div><\/div><\/div>"},createWeatherBeaufortModal:function(){return'<div class="weatherCube-modal modal fade" id="weatherCubeBeaufort-'+this._uId+'" tabindex="-1" role="dialog" aria-labelledby="weatherCubeBeaufort-'+this._uId+'" aria-hidden="true"><div class="modal-dialog modal-full" role="document"><div class="modal-content rounded-0"><div class="modal-body"><table class="table table-bordered table-striped small"><tbody><tr class="text-center"><th style="background-color:#FFFFFF;"><span title="'+getI18n("weatherCube_beaufortScale_0",this.options.language)+':&nbsp;<1 mph (<0.3 m/s)">0<\/span><\/th><th style="background-color:#CCFFFF;"><span title="'+getI18n("weatherCube_beaufortScale_1",this.options.language)+':&nbsp;1-3&nbsp;mph (0.3-1.5&nbsp;m/s)">1<\/span><\/th><th style="background-color:#99FFCC;"><span title="'+getI18n("weatherCube_beaufortScale_2",this.options.language)+':&nbsp;4-7&nbsp;mph (1.6-3.3&nbsp;m/s)">2<\/span><\/th><th style="background-color:#99FF99;"><span title="'+getI18n("weatherCube_beaufortScale_3",this.options.language)+':&nbsp;8-12&nbsp;mph (3.4-5.5&nbsp;m/s)">3<\/span><\/th><th style="background-color:#99FF66;"><span title="'+getI18n("weatherCube_beaufortScale_4",this.options.language)+':&nbsp;13-18&nbsp;mph (5.5-7.9&nbsp;m/s)">4<\/span><\/th><th style="background-color:#99FF00;"><span title="'+getI18n("weatherCube_beaufortScale_5",this.options.language)+':&nbsp;19-24&nbsp;mph (8.0-10.7&nbsp;m/s)">5<\/span><\/th><th style="background-color:#CCFF00;"><span title="'+getI18n("weatherCube_beaufortScale_6",this.options.language)+':&nbsp;25-31&nbsp;mph (10.8-13.8&nbsp;m/s)">6<\/span><\/th><th style="background-color:#FFFF00;"><span title="'+getI18n("weatherCube_beaufortScale_7",this.options.language)+':&nbsp;32-38&nbsp;mph (13.9-17.1&nbsp;m/s)">7<\/span><\/th><th style="background-color:#FFCC00;"><span title="'+getI18n("weatherCube_beaufortScale_8",this.options.language)+':&nbsp;39-46&nbsp;mph (17.2-20.7&nbsp;m/s)">8<\/span><\/th><th style="background-color:#FF9900;"><span title="'+getI18n("weatherCube_beaufortScale_9",this.options.language)+':&nbsp;47-54&nbsp;mph (20.8-24.4&nbsp;m/s)">9<\/span><\/th><th style="background-color:#FF6600;"><span title="S'+getI18n("weatherCube_beaufortScale_10",this.options.language)+':&nbsp;55-63&nbsp;mph (24.5-28.4&nbsp;m/s)">10<\/span><\/th><th style="background-color:#FF3300;"><span title="'+getI18n("weatherCube_beaufortScale_11",this.options.language)+':&nbsp;64-72&nbsp;mph (28.5-32.6&nbsp;m/s)">11<\/span><\/th><th style="background-color:#FF0000;"><span title="'+getI18n("weatherCube_beaufortScale_12",this.options.language)+':&nbsp;≥73&nbsp;mph (≥32.7&nbsp;m/s)">12<\/span><\/th><\/tr><tr class="text-center"><td><small>'+getI18n("weatherCube_beaufortScale_0",this.options.language)+"<\/small><\/td><td><small>"+getI18n("weatherCube_beaufortScale_1",this.options.language)+"<\/small><\/td><td><small>"+getI18n("weatherCube_beaufortScale_2",this.options.language)+"<\/small><\/td><td><small>"+getI18n("weatherCube_beaufortScale_3",this.options.language)+"<\/small><\/td><td><small>"+getI18n("weatherCube_beaufortScale_4",this.options.language)+"<\/small><\/td><td><small>"+getI18n("weatherCube_beaufortScale_5",this.options.language)+"<\/small><\/td><td><small>"+getI18n("weatherCube_beaufortScale_6",this.options.language)+"<\/small><\/td><td><small>"+getI18n("weatherCube_beaufortScale_7",this.options.language)+"<\/small><\/td><td><small>"+getI18n("weatherCube_beaufortScale_8",this.options.language)+"<\/small><\/td><td><small>"+getI18n("weatherCube_beaufortScale_9",this.options.language)+"<\/small><\/td><td><small>"+getI18n("weatherCube_beaufortScale_10",this.options.language)+"<\/small><\/td><td><small>"+getI18n("weatherCube_beaufortScale_11",this.options.language)+"<\/small><\/td><td><small>"+getI18n("weatherCube_beaufortScale_12",this.options.language)+'<\/small><\/td><\/tr><tr class="text-center text-warning font-weight-bold"><td colspan="6"><h6>'+getI18n("weatherCube_beaufortForce_1",this.options.language)+'<\/h6><\/td><td colspan="2"><h6>'+getI18n("weatherCube_beaufortForce_2",this.options.language)+'<\/h6><\/td><td colspan="2"><h6>'+getI18n("weatherCube_beaufortForce_3",this.options.language)+'<\/h6><\/td><td colspan="2"><h6>'+getI18n("weatherCube_beaufortForce_4",this.options.language)+"<\/h6><\/td><td><h6>"+getI18n("weatherCube_beaufortForce_5",this.options.language)+'<\/h6><\/td><\/tr><tr class="text-center"><td><span>&lt;1&nbsp;mph<br />&lt;1&nbsp;knot<br />&lt;0.3&nbsp;m/s<\/span><\/td><td><span>1-3&nbsp;mph<br />1-3&nbsp;knots<br />0.3-1.5&nbsp;m/s<\/span><\/td><td><span>4-7&nbsp;mph<br />4-6&nbsp;knots<br />1.6-3.3&nbsp;m/s<\/span><\/td><td><span>8-12&nbsp;mph<br />7-10&nbsp;knots<br />3.4-5.5&nbsp;m/s<\/span><\/td><td><span>13-18&nbsp;mph<br />11-16&nbsp;knots<br />5.5-7.9&nbsp;m/s<\/span><\/td><td><span>18-24&nbsp;mph<br />17-21&nbsp;knots<br />8.0-10.7&nbsp;m/s<\/span><\/td><td><span>25-31&nbsp;mph<br />22-27&nbsp;knots<br />10.8-13.8&nbsp;m/s<\/span><\/td><td><span>31-38&nbsp;mph<br />28-33&nbsp;knots<br />13.9-17.1&nbsp;m/s<\/span><\/td><td><span>39-46&nbsp;mph<br />34-40&nbsp;knots<br />17.2-20.7&nbsp;m/s<\/span><\/td><td><span>47-54&nbsp;mph<br />41-47&nbsp;knots<br />20.8-24.4&nbsp;m/s<\/span><\/td><td><span>55-63&nbsp;mph<br />48-55&nbsp;knots<br />24.5-28.4&nbsp;m/s<\/span><\/td><td><span>64-72&nbsp;mph<br />56-63&nbsp;knots<br />28.5-32.6&nbsp;m/s<\/span><\/td><td><span>&ge;73&nbsp;mph73<br />&ge;63&nbsp;knots<br />&ge;32.7&nbsp;m/s<\/span><\/td><\/tr><\/tbody><\/table><footer class="d-flex justify-content-end align-items-center rounded-0 p-2"><button type="button" class="btn btn-info btn-sm" data-dismiss="modal">'+getI18n("weatherCube_close",this.options.language)+"<\/button><\/footer><\/div><\/div><\/div><\/div>"},createWeatherUviModal:function(){return'<div class="weatherCube-modal modal fade" id="weatherCubeUviModal-'+this._uId+'" tabindex="-1" role="dialog" aria-labelledby="weatherCubeUviModal-'+this._uId+'" aria-hidden="true"><div class="modal-dialog modal-full" role="document"><div class="modal-content rounded-0"><div class="modal-body"><table class="uviTableInfo table table-borderless mb-0"><thead><tr class="uviTableInfo-tr"><th class="m-2 p-4 text-center bg-primary"><samp class="h2 digital-numbers font-weight-bold">1<\/samp><\/th><th class="m-2 p-4 text-center bg-primary"><samp class="h2 digital-numbers font-weight-bold">2<\/samp><\/th><th class="m-2 p-4 text-center bg-success"><samp class="h2 digital-numbers font-weight-bold">3<\/samp><\/th><th class="m-2 p-4 text-center bg-success"><samp class="h2 digital-numbers font-weight-bold">4<\/samp><\/th><th class="m-2 p-4 text-center bg-success"><samp class="h2 digital-numbers font-weight-bold">5<\/samp><\/th><th class="m-2 p-4 text-center bg-warning"><samp class="h2 digital-numbers font-weight-bold">6<\/samp><\/th><th class="m-2 p-4 text-center bg-warning"><samp class="h2 digital-numbers font-weight-bold">7<\/samp><\/th><th class="m-2 p-4 text-center bg-danger"><samp class="h2 digital-numbers font-weight-bold">8<\/samp><\/th><th class="m-2 p-4 text-center bg-danger"><samp class="h2 digital-numbers font-weight-bold">9<\/samp><\/th><th class="m-2 p-4 text-center bg-danger"><samp class="h2 digital-numbers font-weight-bold">10<\/samp><\/th><th class="m-2 p-4 text-center bg-secondary"><samp class="h2 digital-numbers font-weight-bold">11&nbsp;-&nbsp;16<\/samp><\/th><\/tr><tr class="uviTableInfo-tr"><th colspan="3" class="bg-primary"><samp class="h4 font-weight-bold">'+getI18n("weatherCube_currentIndexLow",this.options.language)+'<\/samp><\/th><th colspan="2" class="bg-success"><samp class="h4 font-weight-bold">'+getI18n("weatherCube_currentIndexModerate",this.options.language)+'<\/samp><\/th><th colspan="3" class="bg-warning"><samp class="h4 font-weight-bold">'+getI18n("weatherCube_currentIndexHigh",this.options.language)+'<\/samp><\/th><th colspan="2" class="bg-danger"><samp class="h4 font-weight-bold">'+getI18n("weatherCube_currentIndexVeryHigh",this.options.language)+'<\/samp><\/th><th colspan="1" class="bg-secondary"><samp class="h4 font-weight-bold">'+getI18n("weatherCube_currentIndexExtreme",this.options.language)+'<\/samp><\/th><\/tr><\/thead><tbody><tr><td colspan="3" class="border-success p-2"><div class="alert alert-primary" role="alert"><span class="h6 p-1">'+getI18n("weatherCube_currentIndexLowDesc",this.options.language)+'<\/span><\/div><\/td><td colspan="3" class="border-warning p-2"><div class="alert alert-success" role="alert"><span class="h6 p-1">'+getI18n("weatherCube_currentIndexModerateDesc",this.options.language)+'<\/span><\/div><\/td><td colspan="3" class="border-danger p-2"><div class="alert alert-warning" role="alert"><span class="h6 p-1">'+getI18n("weatherCube_currentIndexHighDesc",this.options.language)+'<\/span><\/div><\/td><td colspan="2" class="border-dark p-2"><div class="alert alert-danger" role="alert"><span class="h6 p-1">'+getI18n("weatherCube_currentIndexExtremeDesc",this.options.language)+'<\/span><\/div><\/td><\/tr><\/tbody><\/table><footer class="d-flex justify-content-end align-items-center rounded-0 p-2"><button type="button" class="btn btn-info btn-sm" data-dismiss="modal">'+getI18n("weatherCube_close",this.options.language)+"<\/button><\/footer><\/div><\/div><\/div><\/div>"},createWeatherTimeModal:function(){let n=this,t={imgUrl:"https://www.fourmilab.ch/cgi-bin/Earth?img=NASA500m.evif&imgsize=420&dynimg=y&opt=-p&date=0",beforeLoad:function(){},complete:function(){n.$element.find("#weatherCube-timeDayOverlay-"+n._uId).hide("slow");n.$element.find("#weatherCube-timeDayOverlay-"+n._uId).empty()},success:function(t){n.$element.find("#weatherCube-timeDayImage-"+n._uId).attr("src",t.imageElem.src);n.options.debug&&console.info("Successfully loaded timeDay image");n.$element.find("#weatherCube-loaderText-"+n._uId).text(getI18n("weatherCube_ready",n.options.language))},error:function(){n.$element.find("#weatherCube-loaderText-"+n._uId).text(getI18n("weatherCube_getSatErrors",n.options.language));n.options.debug&&console.error("Error loading timeDay image")}};return n.loadImage(t),'<div class="weatherCube-modal modal fade" id="weatherCubeTimeModal-'+this._uId+'" tabindex="-1" role="dialog" aria-labelledby="weatherCubeTimeModal-'+this._uId+'" aria-hidden="true"><div class="modal-dialog modal-full" role="document"><div class="modal-content rounded-0"><div class="modal-body p-3 m-0"><div class="row no-gutters"><div class="col-md-4 col-sm-12"><div class="embed-responsive embed-responsive-16by9"><iframe class="embed-responsive-item" src="https://www.youtube-nocookie.com/embed/7pRev3usGPA?controls=0&rel=0&autoplay=1"><\/iframe><\/div><\/div><div class="col-md-4 col-sm-12 text-center"><button type="button" class="btn btn-info btn-lg" data-dismiss="modal">'+getI18n("weatherCube_close",this.options.language)+'<\/button><\/div><div class="col-md-4 col-sm-12"><div id="weatherCube-timeDayOverlay-'+this._uId+'" class="weatherCube-loader-overlay">'+this.createWeatherLoader()+'<\/div><img id="weatherCube-timeDayImage-'+this._uId+'" src="#" class="img-fluid h-100" alt="Current Time Zone" /><\/div><\/div><\/div><\/div><\/div><\/div>'},createEarthquakePopup:function(n,t){return'<div class="earthquake-popup"><h6 class="text-center text-warning">'+getI18n("weatherCube_currentForecastEarthquakes",this.options.language)+'<\/h6><div class="d-flex flex-column align-self-center align-items-center justify-content-center flex-grow-1 mr-2 text-left"><h1 class="text-bold mr-2 digital-font text-warning d-flex align-self-center align-items-center justify-content-center"><i class="wi wi-earthquake wi-fw text-warning" aria-hidden="true"><\/i>'+n+'<\/h1><hr class="p-1 m-0 w-75" /><span class="text-uppercase font-weight-bold">'+getI18n("weatherCube_earthquakesTsunami",this.options.language)+t+"<\/span><\/div><\/div>"},createWeatherModalCopyright:function(){return'<footer class="modal-footer d-flex align-items-center bg-dark rounded-0 p-2"><span class="text-warning font-weight-bold mr-auto h6 pt-2">Copyright&nbsp;&copy;&nbsp;2007&nbsp;-&nbsp;'+(new Date).getFullYear().toString()+',&nbsp;<a href="https://mcx-systems.net">MCX-Systems&reg;<\/a>.<\/span><button type="button" class="btn btn-info btn-sm" data-dismiss="modal">'+getI18n("weatherCube_close",this.options.language)+"<\/button><\/footer>"},createWeatherLoader:function(){return'<div class="spinner-border spinner-border-sm text-danger mb-1" role="status" style="width:3rem;height:3rem;"><\/div>'},destroy:function(){this.unbindEvents();this.$element.removeData()},buildCache:function(){this.$element=n(this.element)},bindEvents:function(){let i=this;const s=1,e=5,o=[e];let r=0,f=0;i.$element.on("click touchstart."+i._name,".weatherCube-alertDialog",function(){i.$element.find("#weatherCube-"+i._uId).append(i.createWeatherAlertsModal());i.$element.find("#weatherCubeAlerts-"+i._uId).modal({show:!0,keyboard:!1,backdrop:!0}).on("hidden.bs.modal",function(){i.$element.find("#alertsInterval-"+i._uId).carousel("dispose");i.$element.find("#weatherCubeAlerts-"+i._uId).modal("dispose");i.$element.find("#weatherCubeAlerts-"+i._uId).remove()});let t="";n.each(i._dataResult,function(n,r){let u="";n>0&&(n===1&&(u="active"),t+='<div id="alertsIntervalItem-'+i._uId+"-"+n+'" class="table-responsive carousel-item '+u+'"><div class="p-1 font-weight-bold text-left text-white">'+r.title+"<\/div>"+r.description+"<\/div>")});i.$element.find("#alertsInterval-"+i._uId+" .carousel-inner").empty().append(t);i.$element.find(".weatherCube-alertsCarousel table").addClass("table table-sm table-striped table-bordered text-white");i.$element.find("#alertsInterval-"+i._uId).carousel({interval:5e3});i.$element.find(".weatherCube .modal-full .modal-content").height(i.$element.height());n(".modal-backdrop").attr("id","backdrop-"+i._uId).appendTo(i.$element.find("#weatherCube-"+i._uId))});i.$element.on("click touchstart."+i._name,"#weatherCubeInfoToggle-"+i._uId,function(){i.$element.find("#weatherCube-"+i._uId).append(i.createWeatherInfoModal());i.$element.find("#weatherCubeInfo-"+i._uId).modal({show:!0,keyboard:!1,backdrop:!0});n(".modal-backdrop").attr("id","backdrop-"+i._uId).appendTo(i.$element.find("#weatherCube-"+i._uId));i.$element.find("#weatherCubeInfo-"+i._uId+" a").tooltip({animation:!0,trigger:"hover"})});i.$element.on("hidden.bs.modal."+i._name,"#weatherCubeInfo-"+i._uId,function(){i.$element.find("#weatherCubeInfo-"+i._uId).modal("dispose");i.$element.find("#backdrop-"+i._uId).remove();i.$element.find("#weatherCubeInfo-"+i._uId).remove()});i.$element.on("hidden.bs.modal."+i._name,"#weatherCubeBeaufort-"+i._uId,function(){i.$element.find("#weatherCubeBeaufort-"+i._uId).modal("dispose");i.$element.find("#backdrop-"+i._uId).remove();i.$element.find("#weatherCubeBeaufort-"+i._uId).remove()});i.$element.on("shown.bs.modal."+i._name,"#weatherCubeBeaufort-"+i._uId,function(){i.$element.find(".table span").tooltip({animation:!0,trigger:"hover"})});i.$element.on("shown.bs.tab."+i._name,function(n){let r=n.target.toString(),t=r.split("#");if(t[1]==="tabWeatherChart-"+i._uId)i._tempChart.resize(),i._humidityChart.resize(),i._pressureChart.resize(),i._windChart.resize(),i._tempWeekChart.resize(),i._humidityWeekChart.resize(),i._pressureWeekChart.resize(),i._windWeekChart.resize();else if(t[1]==="tabWeatherMap-"+i._uId)i._weatherMap.invalidateSize();else if(t[1]==="tabWeatherQuake-"+i._uId)i._earthquakeChart.resize();else if(t[1]==="tabWeatherWind-"+i._uId){const n={key:i.options.apiWindyKey,lat:i._locationLat,lon:i._locationLon,zoom:5};i._windy||windyInit(n,n=>{const{store:r}=n,u=["rain","wind","temp","clouds"];let t=0;setInterval(()=>{t=t===3?0:t+1,r.set("overlay",u[t])},1e4);const{map:f}=n;i._windyMap=f;i._windy=!0});i._windy&&i._windyMap.invalidateSize()}});i.$element.on("click touchstart."+i._name,"#weatherTab-"+i._uId+" a",function(t){t.preventDefault();n(this).tab("show")});i.$element.on("click touchstart."+i._name,".beaufortScaleModal",function(t){t.preventDefault();i.$element.find("#weatherCube-"+i._uId).append(i.createWeatherBeaufortModal());i.$element.find("#weatherCubeBeaufort-"+i._uId).modal({show:!0,keyboard:!1,backdrop:!0});i.$element.find(".weatherCube .modal-full .modal-content").height(i.$element.height());n(".modal-backdrop").attr("id","backdrop-"+i._uId).appendTo(i.$element.find("#weatherCube-"+i._uId))});i.$element.on("click touchstart."+i._name,"#weatherCube-uviIndexTable-"+i._uId,function(t){t.preventDefault();i.$element.find("#weatherCube-"+i._uId).append(i.createWeatherUviModal());i.$element.find("#weatherCubeUviModal-"+i._uId).modal({show:!0,keyboard:!1,backdrop:!0});i.$element.find(".weatherCube .modal-full .modal-content").height(i.$element.height());n(".modal-backdrop").attr("id","backdrop-"+i._uId).appendTo(i.$element.find("#weatherCube-"+i._uId))});i.$element.on("click touchstart."+i._name,".weatherCube-timeTable",function(t){t.preventDefault();i.$element.find("#weatherCube-"+i._uId).append(i.createWeatherTimeModal());i.$element.find("#weatherCubeTimeModal-"+i._uId).modal({show:!0,keyboard:!1,backdrop:!0});i.$element.find(".weatherCube .modal-full .modal-content").height(i.$element.height());n(".modal-backdrop").attr("id","backdrop-"+i._uId).appendTo(i.$element.find("#weatherCube-"+i._uId))});i.$element.on("hidden.bs.modal."+i._name,"#weatherCubeTimeModal-"+i._uId,function(){i.$element.find("#weatherCubeTimeModal-"+i._uId).modal("dispose");i.$element.find("#backdrop-"+i._uId).remove();i.$element.find("#weatherCubeTimeModal-"+i._uId).remove()});i.$element.on("click touchstart."+i._name,function(){const h=(new Date).getTime();if(f===e-1||r>0){let f=h-o[r];if(f<s*1e3){i.$element.find("#weatherCube-"+i._uId).append(i.createWeatherVersionModal());i.$element.find("#weatherCubeVersion-"+i._uId).modal({show:!0,keyboard:!1,backdrop:!0});let r=u.version.split("+");n("#versionJQuery-"+i._uId).html(t.jQuery.fn.jquery);n("#versionBootstrap-"+i._uId).html(n.fn.tooltip.Constructor.VERSION);n("#versionLeaflet-"+i._uId).html(r[0]);n("#versionECharts-"+i._uId).html(t.echarts.version);n(".modal-backdrop").attr("id","backdrop-"+i._uId).appendTo(i.$element.find("#weatherCube-"+i._uId));i.$element.find("#weatherCubeVersion-"+i._uId+" a").tooltip({animation:!0,trigger:"hover"});i.options.debug&&console.info("You clicked 5 times (Quickly) on the widget, showing Widget Info!")}r++}o[f]=h;f++;f===e&&(f=0);r===e&&(r=0)})},unbindEvents:function(){this.$element.off("."+this._name)},createWeatherSatImages:function(){let t=this,f,i,u="",r=t.getTimezoneName();if(r=r.replace(".","_dot_"),t.options.satImageEnabled){t.options.debug&&console.info("Function for creating Satellite images called.");let e=t.options.satImageLocations,o=t.options.satImageSize;e.length?(t.options.debug&&(console.info("Array of satellite images is set. It counts - "+e.length+" images."),console.info("--------------------------------------------")),t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getSatImages",t.options.language)),n.each(e,function(e,s){if(u+='<div class="col-sm-12 col-md-6 col-xl-3"><div id="imageContainerLoader_'+e+"_"+t._uId+'" class="weatherCube-loader-overlay">'+t.createWeatherLoader()+'<\/div><img id="SatImage-'+t._uId+"-"+e+'" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoAAAAHgAQMAAAAPH06nAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAADxJREFUeNrtwQENAAAAwiD7pzbHN2AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEHSX4AABBztEwQAAAABJRU5ErkJggg==" alt="Sat Image for region '+s.region+'" class="img-fluid" /><\/div>',n.inArray(s.region,b)<0){t.options.debug&&console.info("Selected region is invalid: "+s.region);return}if(t.options.debug&&console.info("Selected region is valid: "+s.region),s.animated){if(n.inArray(s.type,a)<0){t.options.debug&&console.error("Selected image type is invalid: "+s.type+". Allowed types are: "+a.toString());return}t.options.debug&&console.info("Selected Satellite image type is animated.");i=w.replace("{0}",s.region);i=i.replace("{1}",s.type);i=i.replace("{2}",o);i=r!==null&&r!==""?i.replace("{3}",r):i.replace("{3}","");let u=Math.floor(Math.random()*1e7+1);i=i.replace("{4}",u.toString());i=encodeURI(i);f=i.replace("http:","https:")}else{if(n.inArray(s.type,v)<0){t.options.debug&&console.error("Selected image type is invalid: "+s.type+". Allowed types are: "+v.toString());return}t.options.debug&&console.info("Selected Satellite image type is static.");i=p.replace("{0}",s.region);i=i.replace("{1}",s.type);i=encodeURI(i);f=i.replace("http:","https:")}t.options.debug&&(console.info("Everything seems to be ok. Try to load Image."),console.info("Getting visual satellite image for region: "+s.region));let h={imgUrl:f,beforeLoad:function(){},complete:function(){t.$element.find("#imageContainerLoader_"+e+"_"+t._uId).hide("slow");t.$element.find("#imageContainerLoader_"+e+"_"+t._uId).empty()},success:function(n){t.$element.find("#SatImage-"+t._uId+"-"+e).attr("src",n.imageElem.src);t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getSatSuccess",t.options.language));t.options.debug&&console.info("Successfully loaded satellite image for region- "+s.region);t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_ready",t.options.language))},error:function(){t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getSatErrors",t.options.language));t.options.debug&&console.error("Error loading satellite image for region- "+s.region)}};t.loadImage(h);t.options.debug&&console.info("--------------------------------------------")})):(u+='<div class="col-12 text-center p-3 pb-1"><div class="alert alert-danger" role="alert"><i class="wi wi-snowflake-cold mr-2" aria-hidden="true"><\/i><strong>'+getI18n("weatherCube_satNotSet",t.options.language)+"<\/strong><\/div><\/div>",t.options.debug&&console.warn("Weather Satellite Images, are not set!"))}else u+='<div class="col-12 text-center p-3 pb-1"><div class="alert alert-danger" role="alert"><i class="wi wi-snowflake-cold mr-2" aria-hidden="true"><\/i><strong>'+getI18n("weatherCube_satError",t.options.language)+"<\/strong><\/div><\/div>",t.options.debug&&console.warn("Weather Satellite Images, are disabled!");t.$element.find("#imagesContainer-"+t._uId).empty().append(u);setTimeout(function(){t.getSpaceImages();t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getSatAll",t.options.language));setTimeout(function(){t.$element.find("#weatherCube-spinner-"+t._uId).hide();t.$element.find("#weatherCube-footerLoader-"+t._uId).css("color","green");t.$element.find("#weatherCube-update-"+t._uId).text(t.formatTime(n.now(),0));t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_ready",t.options.language))},2e3)},4e3)},createWeatherMap:function(){function d(t){k.setLatLng(t.latlng).setContent(getI18n("weatherCube_mapClick",n.options.language)+t.latlng.toString()).openOn(n._weatherMap);console.info("Click on map Detected.")}let n=this,e=u.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'MCX-Systems © <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap<\/a> contributors<\/a>'}),o=u.tileLayer("https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",{maxZoom:19,attribution:'MCX-Systems © <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap<\/a> contributors<\/a>Tiles style by <a href="https://www.hotosm.org/" target="_blank">Humanitarian OpenStreetMap Team<\/a> hosted by <a href="https://openstreetmap.fr/" target="_blank">OpenStreetMap France<\/a>'}),f=u.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}.jpg",{maxZoom:19,attribution:"MCX-Systems © Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}),s=u.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",{maxZoom:19,attribution:"MCX-Systems © Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"}),h=n._locationLat,c=n._locationLon;const i='MCX-Systems © Weather from <a href="https://openweathermap.org/" title="World Map and worldwide Weather Forecast online">OpenWeatherMap<\/a>';let r="https://tile.openweathermap.org/map/{layer}/{z}/{x}/{y}.png?appid={api_key}",l=u.tileLayer(r,{layer:"precipitation_new",api_key:n.options.apiKey,attribution:i}),a=u.tileLayer(r,{layer:"wind_new",api_key:n.options.apiKey,attribution:i}),v=u.tileLayer(r,{layer:"temp_new",api_key:n.options.apiKey,attribution:i}),y=u.tileLayer(r,{layer:"pressure_new",api_key:n.options.apiKey,attribution:i}),p=u.tileLayer(r,{layer:"clouds_new",api_key:n.options.apiKey,attribution:i}),w=u.tileLayer(r,{layer:"rain_new",api_key:n.options.apiKey,attribution:i});n._weatherMap=u.map("weatherCube-map-"+n._uId,{center:new u.LatLng(h,c),zoom:3,layers:[f]});n._weatherMap.attributionControl.setPrefix("");let b={"OSM HOT":o,"OSM Standard":e,"ESRI Imagery":f,"ESRI Street":s},t={};t[getI18n("weatherCube_currentForecastPrecipitation",n.options.language)]=l;t[getI18n("weatherCube_currentForecastWind",n.options.language)]=a;t[getI18n("weatherCube_currentForecastClouds",n.options.language)]=p;t[getI18n("weatherCube_currentForecastPressure",n.options.language)]=y;t[getI18n("weatherCube_currentForecastRain",n.options.language)]=w;t[getI18n("weatherCube_currentForecastTemperature",n.options.language)]=v;t[getI18n("weatherCube_currentForecastEarthquakes",n.options.language)]=n._earthquakesArray;u.control.layers(b,t,{collapsed:!0}).addTo(n._weatherMap);let k=u.popup();n._weatherMap.on("click",d)},getWeatherQuakesData:function(){let t=this,i=0,u=t.statusLocalStorage("weather_quakes"),r=g.replace("{0}",t.options.quakesPeriod);if(t.options.debug&&console.info("Updating earthquake data!"),u){let n=localStorage.getItem("weather_quakes"),i=JSON.parse(n);t.parseWeatherQuakesData(i,"Quakes data from local storage: ");t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getQuakesCacheFeed",t.options.language))}else t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getQuakesLiveFeed",t.options.language)),n.ajax({url:r,dataType:"json",cache:!0,success:function(n){if(n===null)return!0;t.options.debug&&console.info("Success, getting data for: "+r);t.setLocalStorage("weather_quakes",JSON.stringify(n),t.options.cache);let u=localStorage.getItem("weather_quakes"),f=JSON.parse(u);return t.parseWeatherQuakesData(f,"Quakes data from local storage: "),t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getQuakesSuccessFeed",t.options.language)),i=0,!0},error:function(u,f,e){if(t.options.debug&&(console.error("Error getting JSON data from: "+r),console.error(e+"\r"+u.statusText+"\r"+u.responseText)),t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getQuakesErrorFeed",t.options.language)),i++,i<=t.options.retryLimit){t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getFeedTryAgain",t.options.language));let i=this;return setTimeout(function(){n.ajax(i)},2e3),!1}return!1}})},parseWeatherQuakesData:function(t,i){let r=this,f="";r.options.debug&&console.log(i,t);r.options.debug&&console.info("Updating current data!");let e=[],o=[];r._earthquakeChart.clear();r._earthquakesArray.clearLayers();const s=u.Icon.extend({options:{iconSize:[95,95]}});n.each(t.features,function(n,t){let i="alert-info",h=getI18n("weatherCube_earthquakesTsunamiNo",r.options.language);i=t.properties.mag<3?"alert-info":t.properties.mag>3&&t.properties.mag<5?"alert-warning":t.properties.mag>5&&t.properties.mag<14?"alert-danger":"alert-info";t.properties.tsunami>0&&(h=getI18n("weatherCube_earthquakesTsunamiYes",r.options.language));e.push(r.formatTime(t.properties.time,!0));o.push(Math.round(t.properties.mag*100)/100);let c=Math.round(t.geometry.coordinates[1]*100)/100,l=Math.round(t.geometry.coordinates[0]*100)/100;if(Math.round(t.properties.mag*100)/100>5){let n=new s({iconUrl:"data:image/png;base64,"+getImage("quake",0)});u.marker([c,l],{icon:n}).bindPopup(r.createEarthquakePopup(Math.round(t.properties.mag*100)/100,getI18n("weatherCube_earthquakesTsunami",r.options.language))).addTo(r._earthquakesArray)}f+='<div class="alert '+i+' text-left" role="alert"><samp class="mr-1">'+getI18n("weatherCube_earthquakesStatus",r.options.language)+'<span class="text-uppercase badge bg-primary">'+t.properties.status+'<\/span><\/samp><h1 class="text-bold d-flex align-self-center align-items-center justify-content-end justify-content-sm-center "><i class="wi wi-earthquake wi-fw text-info" aria-hidden="true"><\/i><samp class="digital-numbers pb-1">'+Math.round(t.properties.mag*100)/100+'<\/samp><\/h1><p class="text-semibold d-flex align-self-center align-items-center justify-content-end justify-content-sm-center mr-2">'+t.properties.place+'<\/p><hr class="p-0 m-0 mt-1"/><div class="d-flex justify-content-between"><div class="text-left"><span class="text-semibold small">'+getI18n("weatherCube_earthquakesLatitude",r.options.language)+'<\/span><samp class="text-semibold digital-numbers small ml-2">'+Math.round(t.geometry.coordinates[1]*100)/100+'<\/samp><i class="wi wi-degrees" aria-hidden="true"><\/i><hr class="p-0 m-0 mt-1"/><span class="text-semibold small">'+getI18n("weatherCube_earthquakesLongitude",r.options.language)+'<\/span><samp class="text-semibold digital-numbers small ml-2">'+Math.round(t.geometry.coordinates[0]*100)/100+'<\/samp><i class="wi wi-degrees"><\/i><\/div><div class="text-center"><span class="text-semibold small">'+getI18n("weatherCube_earthquakesTime",r.options.language)+'<\/span><samp class="text-semibold small digital-numbers">'+r.formatTime(t.properties.time,3,!1)+'<\/samp><hr class="p-0 m-0 mt-1"/><samp class="text-semibold small digital-numbers">'+r.formatTime(t.properties.time,1,!1)+'<\/samp><\/div><div class="text-right"><span class="text-semibold small mt-1"><i class="wi wi-tsunami mr-2"><\/i>'+getI18n("weatherCube_earthquakesTsunami",r.options.language)+'<\/span><hr class="p-0 m-0 mt-1 mb-1"/><h3 class="text-uppercase badge badge-danger">'+h+"<\/h3><\/div><\/div><\/div>"});r.$element.find("#weatherQuakesArea-"+r._uId).empty().append(f);r._earthquakeChart.setOption({tooltip:{formatter:"{a} <br/>{b}: {c} (Mw)"},grid:{bottom:"15%"},legend:{},yAxis:{type:"value",axisLabel:{formatter:"{value} Mw",margin:15}},xAxis:{type:"category",data:e},dataZoom:[{startValue:"2014-06-01"},{type:"inside"}],visualMap:{top:5,right:5,pieces:[{gt:0,lte:1,color:"rgb(0,153,102)"},{gt:1,lte:2,color:"rgb(255,222,51)"},{gt:2,lte:5,color:"rgb(255,153,51)"},{gt:5,color:"rgb(189,40,27)"}],outOfRange:{color:"rgb(153,153,153)"}},series:[{name:getI18n("weatherCube_earthquakesStrength",r.options.language),data:o,type:"bar",markPoint:{data:[{type:"min",name:getI18n("weatherCube_earthquakesMaxStrength",r.options.language)},{type:"max",name:getI18n("weatherCube_earthquakesMinStrength",r.options.language)}]},markLine:{silent:!0,data:[{yAxis:1},{yAxis:2},{yAxis:4},{yAxis:5},{yAxis:12}]}}]});r._earthquakeChart.hideLoading();r.options.debug&&console.info("Earthquake list successfully updated!")},getSpaceImages:function(){let t=this,i=0,r=t.statusLocalStorage("weather_space");if(t.options.debug&&console.info("Updating earthquake data!"),r){let n=localStorage.getItem("weather_space"),i=JSON.parse(n);t.parseWeatherSpaceData(i,"Space data from local storage: ");t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getSpaceCacheFeed",t.options.language))}else t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getSpaceLiveFeed",t.options.language)),n.ajax({url:"https://mcx-systems.net/astronomy.php?latitude="+t._locationLat+"&longitude="+t._locationLon,dataType:"json",cache:!0,success:function(n){if(n===null)return!0;t.options.debug&&console.info("Success, getting data for: https://mcx-systems.net/");t.setLocalStorage("weather_space",JSON.stringify(n),t.options.cache);let r=localStorage.getItem("weather_space"),u=JSON.parse(r);return t.parseWeatherSpaceData(u,"Space data from local storage: "),t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getSpaceSuccessFeed",t.options.language)),i=0,!0},error:function(r,u,f){if(t.options.debug&&(console.error("Error getting JSON data from: https://mcx-systems.net/"),console.error(f+"\r"+r.statusText+"\r"+r.responseText)),t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getSpaceErrorFeed",t.options.language)),i++,i<=t.options.retryLimit){t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getFeedTryAgain",t.options.language));let i=this;return setTimeout(function(){n.ajax(i)},2e3),!1}return!1}})},parseWeatherSpaceData:function(t,i){let r=this;r.options.debug&&console.log(i,t);r.options.debug&&console.info("Updating current data!");n.each(t.astroHorizonts,function(n,t){r.$element.find("#spaceImage-"+n+"-"+r._uId).attr("src",t.url)});let u='<table class="table table-sm table-striped table-bordered table-dark mb-0 text-center"><tr><th rowspan="2">&nbsp;<\/th><th rowspan="2" class="text-warning">'+getI18n("weatherCube_planetRightAscension",r.options.language)+'<\/th><th rowspan="2" class="text-warning">'+getI18n("weatherCube_planetDeclination",r.options.language)+'<\/th><th rowspan="2" class="text-warning">'+getI18n("weatherCube_planetDistance",r.options.language)+'<\/th><th colspan="2" class="text-warning">'+r.getDegreePart(t.astroHorizonts[0].loc)+'<\/th><\/tr><tr><th class="text-danger">'+getI18n("weatherCube_planetAltitude",r.options.language)+'<\/th><th class="text-success">'+getI18n("weatherCube_planetAzimuth",r.options.language)+'<\/th><\/tr><tr><th><b class="text-warning">'+getI18n("weatherCube_planetSun",r.options.language)+'<\/b><\/th><td class="digital-numbers small">'+t.astroHorizonts[0].planets.sun.rightAscension+'<\/td><td class="digital-numbers small">'+r.getDegreePart(t.astroHorizonts[0].planets.sun.declination)+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.sun.distance+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.sun.altitude+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.sun.azimuth+'<\/td><\/tr><tr><th><b class="text-warning">'+getI18n("weatherCube_planetMercury",r.options.language)+'<\/b><\/th><td class="digital-numbers small">'+t.astroHorizonts[0].planets.mercury.rightAscension+'<\/td><td class="digital-numbers small">'+r.getDegreePart(t.astroHorizonts[0].planets.mercury.declination)+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.mercury.distance+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.mercury.altitude+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.mercury.azimuth+'<\/td><\/tr><tr><th><b class="text-warning">'+getI18n("weatherCube_planetVenus",r.options.language)+'<\/b><\/th><td class="digital-numbers small">'+t.astroHorizonts[0].planets.venus.rightAscension+'<\/td><td class="digital-numbers small">'+r.getDegreePart(t.astroHorizonts[0].planets.venus.declination)+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.venus.distance+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.venus.altitude+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.venus.azimuth+'<\/td><\/tr><tr><th><b class="text-warning">'+getI18n("weatherCube_planetMoon",r.options.language)+'<\/b><\/th><td class="digital-numbers small">'+t.astroHorizonts[0].planets.moon.rightAscension+'<\/td><td class="digital-numbers small">'+r.getDegreePart(t.astroHorizonts[0].planets.moon.declination)+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.moon.distance+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.moon.altitude+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.moon.azimuth+'<\/td><\/tr><tr><th><b class="text-warning">'+getI18n("weatherCube_planetJupiter",r.options.language)+'<\/b><\/th><td class="digital-numbers small">'+t.astroHorizonts[0].planets.jupiter.rightAscension+'<\/td><td class="digital-numbers small">'+r.getDegreePart(t.astroHorizonts[0].planets.jupiter.declination)+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.jupiter.distance+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.jupiter.altitude+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.jupiter.azimuth+'<\/td><\/tr><tr><th><b class="text-warning">'+getI18n("weatherCube_planetSaturn",r.options.language)+'<\/b><\/th><td class="digital-numbers small">'+t.astroHorizonts[0].planets.saturn.rightAscension+'<\/td><td class="digital-numbers small">'+r.getDegreePart(t.astroHorizonts[0].planets.saturn.declination)+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.saturn.distance+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.saturn.altitude+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.saturn.azimuth+'<\/td><\/tr><tr><th><b class="text-warning">'+getI18n("weatherCube_planetUranus",r.options.language)+'<\/b><\/th><td class="digital-numbers small">'+t.astroHorizonts[0].planets.uranus.rightAscension+'<\/td><td class="digital-numbers small">'+r.getDegreePart(t.astroHorizonts[0].planets.uranus.declination)+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.uranus.distance+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.uranus.altitude+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.uranus.azimuth+'<\/td><\/tr><tr><th><b class="text-warning">'+getI18n("weatherCube_planetNeptune",r.options.language)+'<\/b><\/th><td class="digital-numbers small">'+t.astroHorizonts[0].planets.neptune.rightAscension+'<\/td><td class="digital-numbers small">'+r.getDegreePart(t.astroHorizonts[0].planets.neptune.declination)+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.neptune.distance+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.neptune.altitude+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.neptune.azimuth+'<\/td><\/tr><tr><th><b class="text-warning">'+getI18n("weatherCube_planetPluto",r.options.language)+'<\/b><\/th><td class="digital-numbers small">'+t.astroHorizonts[0].planets.pluto.rightAscension+'<\/td><td class="digital-numbers small">'+r.getDegreePart(t.astroHorizonts[0].planets.pluto.declination)+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.pluto.distance+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.pluto.altitude+'<\/td><td class="digital-numbers small">'+t.astroHorizonts[0].planets.pluto.azimuth+"<\/td><\/tr><\/table>";r.$element.find("#weatherCube-planetsTable-"+r._uId).empty().append(u)},getWeatherAstronomyData:function(){let n=this,h=new Date,k=n._locationLat+","+n._locationLon,r=n.$element.find("#moonCalendar-"+n._uId)[0],f,t,l,e,s=h.getUTCFullYear(),o=h.getUTCMonth()+1,a=h.getUTCDate(),d=[getI18n("weatherCube_monday",n.options.language),getI18n("weatherCube_tuesday",n.options.language),getI18n("weatherCube_wednesday",n.options.language),getI18n("weatherCube_thursday",n.options.language),getI18n("weatherCube_friday",n.options.language),getI18n("weatherCube_saturday",n.options.language),getI18n("weatherCube_sunday",n.options.language)],g=[getI18n("weatherCube_january",n.options.language),getI18n("weatherCube_february",n.options.language),getI18n("weatherCube_march",n.options.language),getI18n("weatherCube_april",n.options.language),getI18n("weatherCube_may",n.options.language),getI18n("weatherCube_june",n.options.language),getI18n("weatherCube_july",n.options.language),getI18n("weatherCube_august",n.options.language),getI18n("weatherCube_september",n.options.language),getI18n("weatherCube_october",n.options.language),getI18n("weatherCube_november",n.options.language),getI18n("weatherCube_december",n.options.language)],v=[getI18n("weatherCube_moonNewMoon",n.options.language),getI18n("weatherCube_moonNewMoon",n.options.language),getI18n("weatherCube_moonWaxingCrescent",n.options.language),getI18n("weatherCube_moonWaxingCrescent",n.options.language),getI18n("weatherCube_moonWaxingCrescent",n.options.language),getI18n("weatherCube_moonWaxingCrescent",n.options.language),getI18n("weatherCube_moonFirstQuarter",n.options.language),getI18n("weatherCube_moonFirstQuarter",n.options.language),getI18n("weatherCube_moonFirstQuarter",n.options.language),getI18n("weatherCube_moonWaxingGibbous",n.options.language),getI18n("weatherCube_moonWaxingGibbous",n.options.language),getI18n("weatherCube_moonWaxingGibbous",n.options.language),getI18n("weatherCube_moonWaxingGibbous",n.options.language),getI18n("weatherCube_moonWaxingGibbous",n.options.language),getI18n("weatherCube_moonFullMoon",n.options.language),getI18n("weatherCube_moonFullMoon",n.options.language),getI18n("weatherCube_moonWaningGibbous",n.options.language),getI18n("weatherCube_moonWaningGibbous",n.options.language),getI18n("weatherCube_moonWaningGibbous",n.options.language),getI18n("weatherCube_moonWaningGibbous",n.options.language),getI18n("weatherCube_moonWaningGibbous",n.options.language),getI18n("weatherCube_moonLastQuarter",n.options.language),getI18n("weatherCube_moonLastQuarter",n.options.language),getI18n("weatherCube_moonLastQuarter",n.options.language),getI18n("weatherCube_moonWaningCrescent",n.options.language),getI18n("weatherCube_moonWaningCrescent",n.options.language),getI18n("weatherCube_moonWaningCrescent",n.options.language),getI18n("weatherCube_moonWaningCrescent",n.options.language),getI18n("weatherCube_moonNewMoon",n.options.language),getI18n("weatherCube_moonNewMoon",n.options.language)],w=[getI18n("weatherCube_earthAstrologyAries",n.options.language),getI18n("weatherCube_earthAstrologyTaurus",n.options.language),getI18n("weatherCube_earthAstrologyGemini",n.options.language),getI18n("weatherCube_earthAstrologyCancer",n.options.language),getI18n("weatherCube_earthAstrologyLeo",n.options.language),getI18n("weatherCube_earthAstrologyVirgo",n.options.language),getI18n("weatherCube_earthAstrologyLibra",n.options.language),getI18n("weatherCube_earthAstrologyScorpio",n.options.language),getI18n("weatherCube_earthAstrologySagittarius",n.options.language),getI18n("weatherCube_earthAstrologyCapricorn",n.options.language),getI18n("weatherCube_earthAstrologyAquarius",n.options.language),getI18n("weatherCube_earthAstrologyPisces",n.options.language)],y=n.getMoonPhase(s,o,a),nt='<img src="data:image/png;base64,'+getImage("moon",y)+'" class="img-fluid mt-3 mb-4" alt="'+v[y]+'" />',tt=v[y],u=h.getMonth()+1;u===12||u===1||u===2?n.$element.find("#weatherCube-seasonsImage-"+n._uId).attr("src","data:image/png;base64,"+getImage("weatherBackground",0)):u>=3&&u<=5?n.$element.find("#weatherCube-seasonsImage-"+n._uId).attr("src","data:image/png;base64,"+getImage("weatherBackground",1)):u>=6&&u<=8?n.$element.find("#weatherCube-seasonsImage-"+n._uId).attr("src","data:image/png;base64,"+getImage("weatherBackground",2)):u>=9&&u<=11&&n.$element.find("#weatherCube-seasonsImage-"+n._uId).attr("src","data:image/png;base64,"+getImage("weatherBackground",3));let p=n.getZodiacSign(o,a,w),it='<table class="table table-striped table-bordered w-100"><tr><td><img src="data:image/png;base64,'+getImage("zodiac",w.indexOf(p))+'" alt="'+p+'" /><\/td><\/tr><tr><td class="font-weight-bold h4 text-warning">'+p+"<\/td><\/tr><\/table>";n.$element.find("#weatherCube-astronomyTable-"+n._uId).empty().append(it);n.$element.find("#weatherMoon-"+n._uId).empty().append(nt);n.$element.find("#currentMoonPhase-"+n._uId).text(tt);n.$element.find("#currentEclipsesData-"+n._uId).empty();let rt=32-new Date(s,o,32).getDate();while(r.firstElementChild.firstChild)r.firstElementChild.removeChild(r.firstElementChild.firstChild);while(r.lastElementChild.firstChild)r.lastElementChild.removeChild(r.lastElementChild.firstChild);f=r.firstElementChild.insertRow();t=i.createElement("th");t.colSpan=7;let c=i.createElement("span");c.setAttribute("class","badge badge-danger");let ut=i.createElement("samp");c.innerHTML=getI18n("weatherCube_moonPhases",n.options.language)+g[o-1]+"-"+s;c.appendChild(ut);t.appendChild(c);f.appendChild(t);f=r.firstElementChild.insertRow();for(let n=0;n<7;n+=1)t=i.createElement("th"),t.setAttribute("class","text-warning"),t.appendChild(i.createTextNode(d[n])),f.appendChild(t);e=new Date(s,o-1,1).getUTCDay();let b=0;for(let u=0;u<42;u+=1)if(u%7==0&&(f=r.lastElementChild.insertRow(b),b+=1),u<e||u>=rt+e)t=f.insertCell(u%7);else{t=f.insertCell(u%7);l=i.createElement("img");u-e+1===a&&t.setAttribute("class","active");let h=n.getMoonPhase(s,o,u-e+1);l.src="data:image/png;base64,"+getImage("moon",h);let r=u-e+1+"-"+o+"-"+s;setTimeout(function(){switch(h){case 0:n.$element.find("#moonDateNew-"+n._uId).text(r);break;case 7:n.$element.find("#moonDateFirst-"+n._uId).text(r);break;case 14:n.$element.find("#moonDateFull-"+n._uId).text(r);break;case 23:n.$element.find("#moonDateSecond-"+n._uId).text(r);break;default:n.$element.find("#moonDateNew-"+n._uId).text(r)}},2e3);let p=i.createElement("div"),c=i.createElement("span");c.setAttribute("class","moonDay badge badge-danger");let w=i.createElement("samp");w.innerHTML=u-e+1;c.appendChild(w);p.appendChild(c);t.appendChild(p);t.appendChild(l);let y=i.createElement("span");y.setAttribute("class","moonPhase badge");y.innerHTML=v[h];t.appendChild(y)}n.getMoonData(k)},getMoonData:function(t){let i=this,r=new Date,u=0,f=i.statusLocalStorage("weather_moon");if(f){let n=localStorage.getItem("weather_moon"),t=JSON.parse(n);i.parseWeatherMoonData(t,"Moon data from local storage: ");i.$element.find("#weatherCube-loaderText-"+i._uId).text(getI18n("weatherCube_getMoonCacheFeed",i.options.language))}else i.$element.find("#weatherCube-loaderText-"+i._uId).text(getI18n("weatherCube_getMoonLiveFeed",i.options.language)),n.ajax({url:h+"?coords="+encodeURIComponent(t)+"&date="+(r.getMonth()+1)+"/"+r.getDate()+"/"+r.getFullYear()+"&tz="+-r.getTimezoneOffset()/60,dataType:"json",cache:!0,success:function(n){if(n===null)return!0;i.options.debug&&console.info("Success, getting data for: "+h);i.setLocalStorage("weather_moon",JSON.stringify(n),i.options.cache);let t=localStorage.getItem("weather_moon"),r=JSON.parse(t);return i.parseWeatherMoonData(r,"New Moon Feed Data: "),i.$element.find("#weatherCube-loaderText-"+i._uId).text(getI18n("weatherCube_getMoonSuccessFeed",i.options.language)),u=0,!0},error:function(t,r,f){if(i.options.debug&&(console.error("Error getting JSON data from: "+h),console.error(f+"\r"+t.statusText+"\r"+t.responseText)),i.$element.find("#weatherCube-loaderText-"+i._uId).text(getI18n("weatherCube_getMoonErrorFeed",i.options.language)),u++,u<=i.options.retryLimit){i.$element.find("#weatherCube-loaderText-"+i._uId).text(getI18n("weatherCube_getFeedTryAgain",i.options.language));let t=this;return setTimeout(function(){n.ajax(t)},2e3),!1}return!1}}),setTimeout(function(){let t=0,u=i.statusLocalStorage("weather_seasons");if(u){let n=localStorage.getItem("weather_seasons"),t=JSON.parse(n);i.parseWeatherSeasonsData(t,"Seasons from local storage: ");i.$element.find("#weatherCube-loaderText-"+i._uId).text(getI18n("weatherCube_getSeasonsCacheFeed",i.options.language))}else i.$element.find("#weatherCube-loaderText-"+i._uId).text(getI18n("weatherCube_getSeasonsLiveFeed",i.options.language)),n.ajax({url:l+"?year="+r.getFullYear()+"&tz="+-r.getTimezoneOffset()/60+"&dst=true",dataType:"json",cache:!0,success:function(n){if(n===null)return!0;i.options.debug&&console.info("Success, getting data for: "+l);i.setLocalStorage("weather_seasons",JSON.stringify(n),i.options.cache);let r=localStorage.getItem("weather_seasons"),u=JSON.parse(r);return i.parseWeatherSeasonsData(u,"New Seasons Feed Data: "),i.$element.find("#weatherCube-loaderText-"+i._uId).text(getI18n("weatherCube_getSeasonsSuccessFeed",i.options.language)),t=0,!0},error:function(r,u,f){if(i.options.debug&&(console.error("Error getting JSON data from: "+l),console.error(f+"\r"+r.statusText+"\r"+r.responseText)),i.$element.find("#weatherCube-loaderText-"+i._uId).text(getI18n("weatherCube_getSeasonsErrorFeed",i.options.language)),t++,t<=i.options.retryLimit){i.$element.find("#weatherCube-loaderText-"+i._uId).text(getI18n("weatherCube_getFeedTryAgain",i.options.language));let t=this;return setTimeout(function(){n.ajax(t)},2e3),!1}return!1}})},1e3),setTimeout(function(){let t=0,u=i.statusLocalStorage("weather_eclipse");if(u){let t=localStorage.getItem("weather_eclipse"),r=JSON.parse(t);n.each(r.eclipses_in_year,function(n,t){i.$element.find("#currentEclipsesData-"+i._uId).append('<span class="font-weight-bold small">'+t.event+"<br /><\/span>")});i.$element.find("#weatherCube-loaderText-"+i._uId).text(getI18n("weatherCube_getEclipseCacheFeed",i.options.language))}else i.$element.find("#weatherCube-loaderText-"+i._uId).text(getI18n("weatherCube_getEclipseLiveFeed",i.options.language)),n.ajax({url:c+"?year="+r.getFullYear(),dataType:"json",cache:!0,success:function(r){if(r===null)return!0;i.options.debug&&console.info("Success, getting data for: "+c);i.setLocalStorage("weather_eclipse",JSON.stringify(r),i.options.cache);let u=localStorage.getItem("weather_eclipse"),f=JSON.parse(u);return n.each(f.eclipses_in_year,function(n,t){i.$element.find("#currentEclipsesData-"+i._uId).append('<span class="font-weight-bold small">'+t.event+"<br /><\/span>")}),i.$element.find("#weatherCube-loaderText-"+i._uId).text(getI18n("weatherCube_getEclipseSuccessFeed",i.options.language)),t=0,!0},error:function(r,u,f){if(i.options.debug&&(console.error("Error getting JSON data from: "+c),console.error(f+"\r"+r.statusText+"\r"+r.responseText)),i.$element.find("#weatherCube-loaderText-"+i._uId).text(getI18n("weatherCube_getEclipseErrorFeed",i.options.language)),t++,t<=i.options.retryLimit){i.$element.find("#weatherCube-loaderText-"+i._uId).text(getI18n("weatherCube_getFeedTryAgain",i.options.language));let t=this;return setTimeout(function(){n.ajax(t)},2e3),!1}return!1}})},2e3)},parseWeatherMoonData:function(n,t){let i=this;i.options.debug&&console.log(t,n);i.options.debug&&console.info("Updating current data!");let r,u;r=n.moondata[0].phen==="R"?n.moondata[0].time:n.prevmoondata[0].time;u=n.moondata[1].phen==="S"?n.moondata[1].time:n.moondata[2].time;let f='<table class="table w-100 text-center text-white"><tr><th><small id="moonDateFirst-'+i._uId+'" class="digital-numbers">---<\/small><\/th><th><small id="moonDateFull-'+i._uId+'" class="digital-numbers">---<\/small><\/th><th><small id="moonDateSecond-'+i._uId+'" class="digital-numbers">---<\/small><\/th><th><small id="moonDateNew-'+i._uId+'" class="digital-numbers">---<\/small><\/th><\/tr><tr><td><img src="data:image/png;base64,'+getImage("moon",7)+'" alt="'+getI18n("weatherCube_earthSeasonsSpring",i.options.language)+'" /><\/td><td><img src="data:image/png;base64,'+getImage("moon",14)+'" alt="'+getI18n("weatherCube_earthSeasonsSummer",i.options.language)+'" /><\/td><td><img src="data:image/png;base64,'+getImage("moon",23)+'" alt="'+getI18n("weatherCube_earthSeasonsFall",i.options.language)+'" /><\/td><td><img src="data:image/png;base64,'+getImage("moon",0)+'" alt="'+getI18n("weatherCube_earthSeasonsWinter",i.options.language)+'" /><\/td><\/tr><tr><td><small class="text-warning">'+getI18n("weatherCube_moonFirstQuarter",i.options.language)+'<\/small><\/td><td><small class="text-warning">'+getI18n("weatherCube_moonFullMoon",i.options.language)+'<\/small><\/td><td><small class="text-warning">'+getI18n("weatherCube_moonLastQuarter",i.options.language)+'<\/small><\/td><td><small class="text-warning">'+getI18n("weatherCube_moonNewMoon",i.options.language)+"<\/small><\/td><\/tr><\/table>";i.$element.find("#weatherCube-moonTable-"+i._uId).empty().append(f);i.$element.find("#currentMoonFracillum-"+i._uId).text(n.fracillum);i.$element.find("#moonRise-"+i._uId).text(r);i.$element.find("#moonSet-"+i._uId).text(u);i.$element.find("#sunRise-"+i._uId).text(n.sundata[1].time);i.$element.find("#sunSet-"+i._uId).text(n.sundata[3].time)},parseWeatherSeasonsData:function(n,t){let i=this;i.options.debug&&console.log(t,n);i.options.debug&&console.info("Updating current data!");let r='<table class="table w-100 text-center text-white"><tr><th><small class="digital-numbers">'+n.data[1].day+"-"+n.data[1].month+"-"+n.data[1].year+'<\/small><\/th><th><small class="digital-numbers">'+n.data[2].day+"-"+n.data[2].month+"-"+n.data[2].year+'<\/small><\/th><th><small class="digital-numbers">'+n.data[4].day+"-"+n.data[4].month+"-"+n.data[4].year+'<\/small><\/th><th><small class="digital-numbers">'+n.data[5].day+"-"+n.data[5].month+"-"+n.data[5].year+'<\/small><\/th><\/tr><tr><td><img src="data:image/png;base64,'+getImage("earth",0)+'" alt="'+getI18n("weatherCube_earthSeasonsSpring",i.options.language)+'" /><\/td><td><img src="data:image/png;base64,'+getImage("earth",1)+'" alt="'+getI18n("weatherCube_earthSeasonsSummer",i.options.language)+'" /><\/td><td><img src="data:image/png;base64,'+getImage("earth",2)+'" alt="'+getI18n("weatherCube_earthSeasonsFall",i.options.language)+'" /><\/td><td><img src="data:image/png;base64,'+getImage("earth",3)+'" alt="'+getI18n("weatherCube_earthSeasonsWinter",i.options.language)+'" /><\/td><\/tr><tr><td><small>Vernal '+getI18n("weatherCube_earthSeasons"+i.capitalizeFirstLetter(n.data[1].phenom),i.options.language)+'<br /><b class="text-warning">'+getI18n("weatherCube_earthSeasonsStart",i.options.language)+getI18n("weatherCube_earthSeasonsSpring",i.options.language)+"<\/b><\/small><\/td><td><small>Summer "+getI18n("weatherCube_earthSeasons"+i.capitalizeFirstLetter(n.data[2].phenom),i.options.language)+'<br /><b class="text-warning">'+getI18n("weatherCube_earthSeasonsStart",i.options.language)+getI18n("weatherCube_earthSeasonsSummer",i.options.language)+"<\/b><\/small><\/td><td><small>Autumn "+getI18n("weatherCube_earthSeasons"+i.capitalizeFirstLetter(n.data[4].phenom),i.options.language)+'<br /><b class="text-warning">'+getI18n("weatherCube_earthSeasonsStart",i.options.language)+getI18n("weatherCube_earthSeasonsFall",i.options.language)+"<\/b><\/small><\/td><td><small>Winter "+getI18n("weatherCube_earthSeasons"+i.capitalizeFirstLetter(n.data[5].phenom),i.options.language)+'<br /><b class="text-warning">'+getI18n("weatherCube_earthSeasonsStart",i.options.language)+getI18n("weatherCube_earthSeasonsWinter",i.options.language)+"<\/b><\/small><\/td><\/tr><\/table>";i.$element.find("#weatherCube-seasonsTable-"+i._uId).empty().append(r);i.$element.find("#weatherCube-loaderText-"+i._uId).text(getI18n("weatherCube_getMoonCreate",i.options.language))},getWeatherCurrentData:function(){let t=this,i=0,r=this.statusLocalStorage("weather_current");if(r){let n=localStorage.getItem("weather_current"),i=JSON.parse(n);t.parseWeatherCurrentData(i,"Current from local storage: ");t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getCurrentCacheFeed",t.options.language))}else t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getCurrentLiveFeed",t.options.language)),n.ajax({url:f,dataType:"json",cache:!0,success:function(n){if(n===null)return!0;t.options.debug&&console.info("Success, getting data for: "+f);t.setLocalStorage("weather_current",JSON.stringify(n),t.options.cache);let r=localStorage.getItem("weather_current"),u=JSON.parse(r);return t.parseWeatherCurrentData(u,"New Current Feed Data: "),t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getCurrentSuccessFeed",t.options.language)),i=0,!0},error:function(r,u,e){if(t.options.debug&&(console.error("Error getting JSON data from: "+f),console.error(e+"\r"+r.statusText+"\r"+r.responseText)),t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getCurrentErrorFeed",t.options.language)),i++,i<=t.options.retryLimit){t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getFeedTryAgain",t.options.language));let i=this;return setTimeout(function(){n.ajax(i)},2e3),!1}return!1}})},parseWeatherCurrentData:function(n,t){let i=this,f,r="",o='<i class="wi wi-thermometer mr-1 h2"><\/i>';i.options.debug&&console.log(t,n);i.options.debug&&console.info("Updating current data!");const u=new Date,s=new Date(n.sys.sunrise*1e3),h=new Date(n.sys.sunset*1e3);Math.round(n.main.temp)<0&&(o='<i class="wi wi-thermometer-exterior mr-1 h2"><\/i>');u.getHours()>=s.getHours()&&u.getHours()<h.getHours()?f="wi-owm-day-"+n.weather[0].id:(u.getHours()>=h.getHours()||u.getHours()<s.getHours())&&(f="wi-owm-night-"+n.weather[0].id);n.weather[0].icon&&(i.options.icons==="tick"?(r='<img class="weatherCube-currentForecastImage pl-3 img-fluid" src="data:image/png;base64,'+imageForecastChooser(n.weather[0].icon,i.options.icons)+'" alt="'+i.capitalizeFirstLetter(n.weather[0].description)+'" />',i.options.debug&&console.info("Icons are set and are of type .svg named: tick.")):i.options.icons==="weezle"?(r='<img class="weatherCube-currentForecastImage pl-3 img-fluid" src="data:image/png;base64,'+imageForecastChooser(n.weather[0].icon,i.options.icons)+'" alt="'+i.capitalizeFirstLetter(n.weather[0].description)+'" />',i.options.debug&&console.info("Icons are set and are of type .svg named: weezle.")):(r='<i class="wi '+f+' wi-fw weatherCube-currentDefault display-2 p-3" title="'+i.capitalizeFirstLetter(n.weather[0].description)+'"><\/i>',i.options.debug&&console.info("Icons are set and are of type weather-icons atrr: wi wi-")));i.$element.find("#weatherCube-currentForecastImage-"+i._uId).empty().append(r);i.$element.find("#weatherCube-currentTemperatureIcon-"+i._uId).empty().append(o);i.$element.find("#weatherCube-currentTemperature-"+i._uId).text(Math.round(n.main.temp));i.$element.find("#weatherCube-currentMinTemperature-"+i._uId).text(Math.round(n.main.temp_min));i.$element.find("#weatherCube-currentMaxTemperature-"+i._uId).text(Math.round(n.main.temp_max));i.$element.find("#weatherCube-currentDescription-"+i._uId).text(i.capitalizeFirstLetter(n.weather[0].description));let c=i.getWindBeaufort(n.wind.speed),e=i.getWindDirection(Math.round(n.wind.deg)),l='<div class="d-flex flex-column mr-4 pt-2"><div class="text-left ml-1 p-1"><i class="wi wi-thermometer wi-fw"><\/i><samp class="digital-numbers">'+Math.round(n.main.temp)+'<\/samp><i class="wi '+i.generateUnitIcon(i.options.units)+' mr-1" aria-hidden="true"><\/i><\/div><div class="text-left ml-1 p-1"><i class="wi wi-humidity wi-fw" aria-hidden="true"><\/i><samp class="digital-numbers">'+Math.round(n.main.humidity)+'<\/samp><span>%<\/span><\/div><div class="text-left ml-1 p-1"><i class="wi wi-barometer wi-fw" aria-hidden="true"><\/i><samp class="digital-numbers">'+Math.round(n.main.pressure)+'<\/samp><span>mPa<\/span><\/div><div class="text-left ml-1 p-1"><a class="beaufortScaleModal" href="#" title="'+getI18n("weatherCube_beaufortScale_"+c,i.options.language)+'"><i class="wi wi-wind-beaufort-'+c+' wi-fw" aria-hidden="true"><\/i><\/a><samp class="digital-numbers">'+Math.round(n.wind.speed)+'<\/samp><span>m/s<\/span><\/div><\/div><div class="ml-auto"><div class="d-flex align-items-center justify-content-center mb-2 mr-2"><samp class="digital-numbers">'+Math.round(n.wind.deg)+'<\/samp><i class="wi wi-degrees mr-1" aria-hidden="true"><\/i><span class="h4 pt-2">'+e+'<\/span><\/div><img src="data:image/png;base64,'+imageWindChooser(e)+'" alt="'+e+'" class="img-fluid mr-3" /><\/div>';i.$element.find("#weatherCube-currentMore-"+i._uId).empty().append(l);i.options.debug&&console.info("Current forecast data populated!");i.$element.find("#weatherCube-loaderText-"+i._uId).text(getI18n("weatherCube_getCurrentParsedFeed",i.options.language));i.$element.find("#weatherCube-overlay-"+i._uId).empty().hide();setTimeout(function(){i.getWeatherUviData()},1e3)},getWeatherForecastData:function(){let t=this,i=0,r=this.statusLocalStorage("weather_forecast");if(r){let n=localStorage.getItem("weather_forecast"),i=JSON.parse(n);t.parseWeatherForecastData(i,"Forecast from local storage: ");t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getForecastCacheFeed",t.options.language))}else t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getCForecastLiveFeed",t.options.language)),n.ajax({url:e,dataType:"json",cache:!0,success:function(n){if(n===null)return!0;t.options.debug&&console.info("Success, getting data for: "+e);t.setLocalStorage("weather_forecast",JSON.stringify(n),t.options.cache);let r=localStorage.getItem("weather_forecast"),u=JSON.parse(r);return t.parseWeatherForecastData(u,"New Forecast Feed Data: "),t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getForecastSuccessFeed",t.options.language)),i=0,!0},error:function(r,u,f){if(t.options.debug&&(console.error("Error getting JSON data from: "+e),console.error(f+"\r"+r.statusText+"\r"+r.responseText)),t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getForecastErrorFeed",t.options.language)),i++,i<=t.options.retryLimit){t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getFeedTryAgain",t.options.language));let i=this;return setTimeout(function(){n.ajax(i)},2e3),!1}return!1}})},parseWeatherForecastData:function(t,i){let r=this;r.options.debug&&console.log(i,t);let f="",u=r.separateForecastByDay(t.list);n.each(u,function(n){let t=r.consolidateToDailyForecast(u[n]),e,i="";const s=new Date;e=s.getHours()>6&&s.getHours()<20?"wi-owm-day-"+t.id:"wi-owm-night-"+t.id;t.icon&&(r.options.icons==="tick"?(i='<img class="img-fluid p-2" src="data:image/png;base64,'+imageForecastChooser(t.icon,r.options.icons)+'" alt="'+r.capitalizeFirstLetter(t.desc)+'" />',r.options.debug&&console.info("Icons are set and are of type .svg named: tick.")):r.options.icons==="weezle"?(i='<img class="img-fluid p-2" src="data:image/png;base64,'+imageForecastChooser(t.icon,r.options.icons)+'" alt="'+r.capitalizeFirstLetter(t.desc)+'" />',r.options.debug&&console.info("Icons are set and are of type .svg named: weezle.")):(i='<i class="wi '+e+' wi-fw weatherCube-currentDefault display-2 p-3" aria-hidden="true" title="'+r.capitalizeFirstLetter(t.desc)+'"><\/i>',r.options.debug&&console.info("Icons are set and are of type weather-icons atrr: wi wi-")));let h=r.getWindBeaufort(t.windSpeed),o=r.getWindDirection(Math.round(t.windDeg));f+='<div class="card flex-fill rounded-0 weatherDay"><header class="card-header p-1 text-center"><samp class="font-weight-bold">'+t.day+'<\/samp><\/header><div class="card-body weatherCubeDayBody">'+i+'<p class="card-text"><span class="digital-numbers h3">'+Math.round(t.low)+'<i class="wi '+r.generateUnitIcon(r.options.units)+'" aria-hidden="true"><\/i>-'+Math.round(t.high)+'<i class="wi '+r.generateUnitIcon(r.options.units)+'"><\/i><\/span><\/p><div class="card-content d-flex flex-row align-items-center p-2 pt-4"><div class="d-flex flex-column align-items-start"><div class="text-left ml-1 p-1"><i class="wi wi-thermometer wi-fw" aria-hidden="true"><\/i><samp class="digital-numbers">'+Math.round(t.ave)+'<\/samp><i class="wi '+r.generateUnitIcon(r.options.units)+' mr-1" aria-hidden="true"><\/i><\/div><div class="text-left ml-1 p-1"><i class="wi wi-humidity wi-fw" aria-hidden="true"><\/i><samp class="digital-numbers">'+Math.round(t.humidity)+'<\/samp><span>%<\/span><\/div><div class="text-left ml-1 p-1"><i class="wi wi-barometer wi-fw" aria-hidden="true"><\/i><samp class="digital-numbers">'+Math.round(t.pressure)+'<\/samp><span>mPa<\/span><\/div><div class="text-left ml-1 p-1"><a class="beaufortScaleModal" href="#" title="'+getI18n("weatherCube_beaufortScale_"+h,r.options.language)+'"><i class="wi wi-wind-beaufort-'+h+' wi-fw" aria-hidden="true"><\/i><\/a><samp class="digital-numbers">'+Math.round(t.windSpeed)+'<\/samp><span>m/s<\/span><\/div><\/div><div class="flex-fill d-none d-xl-block"><div class="d-flex align-items-center justify-content-center mb-2"><samp class="digital-numbers">'+Math.round(t.windDeg)+'<\/samp><i class="wi wi-degrees mr-1" aria-hidden="true"><\/i><span class="h4 pt-2">'+o+'<\/span><\/div><img src="data:image/png;base64,'+imageWindChooser(o)+'" alt="'+o+'" class="img-fluid ml-1" /><\/div><\/div><\/div><footer class="card-footer p-1"><i class="wi '+e+' wi-fw mr-2" aria-hidden="true"><\/i><small class="small font-weight-bold">'+getI18n("weatherCube_main"+r.capitalizeFirstLetter(t.main),r.options.language)+"<\/small><\/footer><\/div>"});r.$element.find("#weatherDaysArea-"+r._uId).empty().append(f);r.$element.find("#weatherCube-loaderText-"+r._uId).text(getI18n("weatherCube_getCurrentParsedFeed",r.options.language));setTimeout(function(){r.parseWeatherHourForecastData(t,u)},1e3);r.options.debug&&console.info("Days forecast successfully updated!")},parseWeatherHourForecastData:function(t,i){let u="",r=this;this.options.debug&&console.info("Updating hour forecast data!");n.each(t.list,function(n,t){if(n>=8)return!1;let f,i="";f=t.sys.pod==="d"?"wi-owm-day-"+t.weather[0].id:t.sys.pod==="n"?"wi-owm-night-"+t.weather[0].id:"wi-owm-day-"+t.weather[0].id;t.weather[0].icon!==null&&(r.options.icons==="tick"?(i='<img class="weatherCube-hourForecastImage img-fluid" src="data:image/png;base64,'+imageForecastChooser(t.weather[0].icon,r.options.icons)+'" alt="'+r.capitalizeFirstLetter(t.weather[0].description)+'" />',r.options.debug&&console.info("Icons are set and are of type .svg named: tick.")):r.options.icons==="weezle"?(i='<img class="weatherCube-hourForecastImage img-fluid" src="data:image/png;base64,'+imageForecastChooser(t.weather[0].icon,r.options.icons)+'" alt="'+r.capitalizeFirstLetter(t.weather[0].description)+'" />',r.options.debug&&console.info("Icons are set and are of type .svg named: weezle.")):(i='<i class="wi '+f+' wi-fw weatherCube-currentDefault display-4 p-3" aria-hidden="true" title="'+r.capitalizeFirstLetter(t.weather[0].description)+'"><\/i>',r.options.debug&&console.info("Icons are set and are of type weather-icons atrr: wi wi-")));let e=r.getWindBeaufort(t.wind.speed),o=r.getWindDirection(Math.round(t.wind.deg));return u+='<div class="card flex-fill rounded-0 weatherHour"><header class="card-header d-flex flex-row align-items-center p-1"><samp class="small font-weight-bold ml-2">'+r.dayToString(new Date(t.dt*1e3).getDay(),r.options.language)+getI18n("weatherCube_viewAt",r.options.language)+'<\/samp><samp class="badge bg-danger small m-0 digital-numbers">'+r.formatTime(t.dt,3,!0)+'<\/samp><\/header><div class="card-body p-2 pr-4"><div class="d-flex justify-content-between"><div class="d-flex align-items-start flex-column justify-content-center">'+i+'<div class="mt-3"><img src="data:image/png;base64,'+imageWindChooser(o)+'" alt="'+o+'" class="img-fluid ml-1" /><\/div><\/div><div class="mt-2"><div class="text-left ml-1"><i class="wi wi-thermometer wi-fw small" aria-hidden="true"><\/i><samp class="digital-numbers small">'+Math.round(t.main.temp)+'<\/samp><i class="wi '+r.generateUnitIcon(r.options.units)+' ml-1" aria-hidden="true"><\/i><\/div><div class="text-left ml-1"><i class="wi wi-humidity wi-fw small" aria-hidden="true"><\/i><samp class="digital-numbers small">'+Math.round(t.main.humidity)+'<\/samp><small class="ml-1">%<\/small><\/div><div class="text-left ml-1"><i class="wi wi-barometer wi-fw small" aria-hidden="true"><\/i><samp class="digital-numbers small">'+Math.round(t.main.pressure)+'<\/samp><small class="ml-1">mPa<\/small><\/div><div class="text-left ml-1"><a class="beaufortScaleModal" href="#" title="'+getI18n("weatherCube_beaufortScale_"+e,r.options.language)+'"><i class="wi wi-wind-beaufort-'+e+' wi-fw small" aria-hidden="true"><\/i><\/a><samp class="digital-numbers small">'+t.wind.speed+'<\/samp><small class="ml-1">m/s<\/small><\/div><\/div><\/div><\/div><footer class="card-footer p-1"><i class="wi '+f+' wi-fw mr-2" aria-hidden="true"><\/i><small class="small font-weight-bold">'+getI18n("weatherCube_main"+r.capitalizeFirstLetter(t.weather[0].main),r.options.language)+"<\/small><\/footer><\/div>",!0});r.$element.find("#weatherHoursArea-"+r._uId).empty().append(u);setTimeout(function(){r.updateChartData(i)},1e3);r.options.debug&&console.info("Days forecast successfully updated!")},updateChartData:function(t){let i=this;i.options.debug&&console.info("Updating charts data!");i._tempChart.clear();i._humidityChart.clear();i._pressureChart.clear();i._windChart.clear();i._tempWeekChart.clear();i._humidityWeekChart.clear();i._pressureWeekChart.clear();i._windWeekChart.clear();let r=[],f=[],e=[],o=[],s=[],h=[],c=[],u=[],l=[],a=[],v=[],y=[],p=[],w=[],k=t[0].forecast,b=i.options.units==="imperial"?"°F":"°C";n.each(t,function(n){let r=i.consolidateToDailyForecast(t[n]);u.push(r.day.slice(0,3));l.push(r.ave);a.push(r.low);v.push(r.high);y.push(r.humidity);p.push(r.pressure);w.push(r.windSpeed)});n.each(k,function(n,t){r.push(i.formatTime(t.dt,!1));f.push(t.main.temp);e.push(t.main.temp_min);o.push(t.main.temp_max);s.push(t.main.humidity);h.push(t.main.pressure);c.push(t.wind.speed)});i._tempChart.setOption({tooltip:{formatter:"{a} <br/>{b}: {c} ("+b+")",trigger:"axis",axisPointer:{type:"shadow"}},grid:{bottom:"10%"},legend:{},axisPointer:{type:"shadow"},yAxis:{type:"category",boundaryGap:!0,data:r,show:!0},xAxis:{type:"value",axisLabel:{formatter:"{value} °C",margin:15}},axis:{y:{padding:{top:200,bottom:0}},y2:{padding:{top:100,bottom:100},show:!0}},color:["rgb(213,38,22)","rgb(30,164,17)","rgb(39,122,255)"],series:[{type:"bar",name:getI18n("weatherCube_chartMaxTemperature",i.options.language),data:o,markPoint:{data:[{type:"max",name:getI18n("weatherCube_chartMaxTemperature",i.options.language)},{type:"min",name:getI18n("weatherCube_chartMinTemperature",i.options.language)}]},markLine:{data:[{type:"average",name:getI18n("weatherCube_chartMaxAveTemperature",i.options.language)}]}},{type:"bar",name:getI18n("weatherCube_chartTemperature",i.options.language),data:f,markPoint:{data:[{type:"max",name:getI18n("weatherCube_chartMaxTemperature",i.options.language)},{type:"min",name:getI18n("weatherCube_chartMinTemperature",i.options.language)}]},markLine:{data:[{type:"average",name:getI18n("weatherCube_chartAveTemperature",i.options.language)}]}},{type:"bar",name:getI18n("weatherCube_chartMinTemperature",i.options.language),data:e,markPoint:{data:[{type:"max",name:getI18n("weatherCube_chartMaxTemperature",i.options.language)},{type:"min",name:getI18n("weatherCube_chartMinTemperature",i.options.language)}]}}]});i._humidityChart.setOption({tooltip:{formatter:"{a} <br/>{b}: {c} (%)"},grid:{bottom:"10%"},legend:{},yAxis:{type:"value",axisLabel:{formatter:"{value} %"}},xAxis:{type:"category",data:r},color:["rgb(39,122,255)"],series:[{name:getI18n("weatherCube_chartHumidity",i.options.language),type:"line",smooth:!0,data:s,areaStyle:{}}]});i._pressureChart.setOption({tooltip:{formatter:"{a} <br/>{b}: {c} (hPa)"},grid:{bottom:"10%"},legend:{},yAxis:{},xAxis:{type:"category",data:r},color:["rgb(255,162,67)"],series:[{name:getI18n("weatherCube_chartPressure",i.options.language),type:"line",smooth:!0,data:h,areaStyle:{}}]});i._windChart.setOption({tooltip:{formatter:"{a} <br/>{b}: {c} (m/s)"},grid:{bottom:"10%"},legend:{},yAxis:{},xAxis:{type:"category",data:r},color:["rgb(200,70,8)"],series:[{name:getI18n("weatherCube_chartWindSpeed",i.options.language),data:c,type:"bar",markPoint:{data:[{type:"max",name:getI18n("weatherCube_chartMaxWindSpeed",i.options.language)},{type:"min",name:getI18n("weatherCube_chartMinWindSpeed",i.options.language)}]},markLine:{data:[{type:"average",name:getI18n("weatherCube_chartAveWindSpeed",i.options.language)}]}}]});i._tempWeekChart.setOption({tooltip:{formatter:"{a} <br/>{b}: {c} ("+b+")",trigger:"axis",axisPointer:{type:"shadow"}},grid:{bottom:"10%"},legend:{},axisPointer:{type:"shadow"},yAxis:{type:"category",boundaryGap:!0,data:u,show:!0},xAxis:{type:"value",axisLabel:{formatter:"{value} °C",margin:15}},axis:{y:{padding:{top:200,bottom:0}},y2:{padding:{top:100,bottom:100},show:!0}},color:["rgb(213,38,22)","rgb(30,164,17)","rgb(39,122,255)"],series:[{type:"bar",name:getI18n("weatherCube_chartMaxTemperature",i.options.language),data:v,markPoint:{data:[{type:"max",name:getI18n("weatherCube_chartMaxTemperature",i.options.language)},{type:"min",name:getI18n("weatherCube_chartMinTemperature",i.options.language)}]},markLine:{data:[{type:"average",name:getI18n("weatherCube_chartMaxAveTemperature",i.options.language)}]}},{type:"bar",name:getI18n("weatherCube_chartTemperature",i.options.language),data:l,markPoint:{data:[{type:"max",name:getI18n("weatherCube_chartMaxTemperature",i.options.language)},{type:"min",name:getI18n("weatherCube_chartMinTemperature",i.options.language)}]},markLine:{data:[{type:"average",name:getI18n("weatherCube_chartAveTemperature",i.options.language)}]}},{type:"bar",name:getI18n("weatherCube_chartMinTemperature",i.options.language),data:a,markPoint:{data:[{type:"max",name:getI18n("weatherCube_chartMaxTemperature",i.options.language)},{type:"min",name:getI18n("weatherCube_chartMinTemperature",i.options.language)}]}}]});i._humidityWeekChart.setOption({tooltip:{formatter:"{a} <br/>{b}: {c} (%)"},grid:{bottom:"10%"},legend:{},yAxis:{type:"value",axisLabel:{formatter:"{value} %"}},xAxis:{type:"category",data:u},color:["rgb(39,122,255)"],series:[{name:getI18n("weatherCube_chartHumidity",i.options.language),type:"line",smooth:!0,data:y,areaStyle:{}}]});i._pressureWeekChart.setOption({tooltip:{formatter:"{a} <br/>{b}: {c} (hPa)"},grid:{bottom:"10%"},legend:{},yAxis:{},xAxis:{type:"category",data:u},color:["rgb(255,162,67)"],series:[{name:getI18n("weatherCube_chartPressure",i.options.language),type:"line",smooth:!0,data:p,areaStyle:{}}]});i._windWeekChart.setOption({tooltip:{formatter:"{a} <br/>{b}: {c} (m/s)"},grid:{bottom:"10%"},legend:{},yAxis:{},xAxis:{type:"category",data:u},color:["rgb(200,70,8)"],series:[{name:getI18n("weatherCube_chartWindSpeed",i.options.language),data:w,type:"bar",markPoint:{data:[{type:"max",name:getI18n("weatherCube_chartMaxWindSpeed",i.options.language)},{type:"min",name:getI18n("weatherCube_chartMinWindSpeed",i.options.language)}]},markLine:{data:[{type:"average",name:getI18n("weatherCube_chartAveWindSpeed",i.options.language)}]}}]});i._tempChart.hideLoading();i._humidityChart.hideLoading();i._pressureChart.hideLoading();i._windChart.hideLoading();i._tempWeekChart.hideLoading();i._humidityWeekChart.hideLoading();i._pressureWeekChart.hideLoading();i._windWeekChart.hideLoading()},getWeatherUviData:function(){let t=this,i=0,r=this.statusLocalStorage("weather_uvi");if(r){let n=localStorage.getItem("weather_uvi"),i=JSON.parse(n);t.parseWeatherUviData(i,"From Local Storage: ");t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getUviCacheFeed",t.options.language))}else t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getUviLiveFeed",t.options.language)),n.ajax({url:o,dataType:"json",cache:!0,success:function(n){if(n===null)return!0;t.options.debug&&console.info("Success, getting data for: "+o);t.setLocalStorage("weather_uvi",JSON.stringify(n),t.options.cache);let r=localStorage.getItem("weather_uvi"),u=JSON.parse(r);return t.parseWeatherUviData(u,"New Uvi Data: "),t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getUviSuccessFeed",t.options.language)),i=0,!0},error:function(r,u,f){if(t.options.debug&&(console.error("Error getting JSON data from: "+o),console.error(f+"\r"+r.statusText+"\r"+r.responseText)),t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getUviErrorFeed",t.options.language)),i++,i<=t.options.retryLimit){t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getFeedTryAgain",t.options.language));let i=this;return setTimeout(function(){n.ajax(i)},2e3),!1}return!1}})},parseWeatherUviData:function(t,i){let r=this;this.options.debug&&console.log(i,t);let u="",f="",e="",o="";n.each(t,function(n,t){let i=t.value,s,h=new Date(t.date*1e3).getDay(),c=r.dayToString(h);n<5&&(s=i<=3?getI18n("weatherCube_currentIndexLow",r.options.language):i>3&&i<=6?getI18n("weatherCube_currentIndexModerate",r.options.language):i>6&&i<=8?getI18n("weatherCube_currentIndexHigh",r.options.language):i>8&&i<=10?getI18n("weatherCube_currentIndexVeryHigh",r.options.language):getI18n("weatherCube_currentIndexExtreme",r.options.language),u+='<td class="p-2"><span class="h5 font-weight-bold">'+c+"<\/span><\/td>",f+='<td class="p-2"><img src="data:image/png;base64,'+getImage("uvi",Math.floor(i))+'" class="img-fluid" alt="'+s+'" /><\/td>',e+='<td class="p-2"><samp class="digital-numbers h4">'+i+"<\/samp><\/td>",o+='<td class="p-2"><h4><span class="badge badge-warning p-1">'+s+"<\/span><\/h4><\/td>",n===0&&setTimeout(function(){r.$element.find("#weatherCube-uviIndexImage-"+r._uId).attr("src","data:image/png;base64,"+getImage("uvi",Math.floor(i)))},200))});let s='<div class="table-responsive"><table class="table table-borderless table-striped mb-0 text-center"><thead><tr class="uviTableInfo-tr bg-primary"><td colspan="6" class="p-2"><span class="h5 font-weight-bold">'+getI18n("weatherCube_uviWeek",r.options.language)+"<\/span><\/td><\/tr><\/thead><tbody><tr>"+u+"<\/tr><tr>"+f+"<\/tr><tr>"+e+"<\/tr><tr>"+o+"<\/tr><\/tbody><\/table><\/div>";r.$element.find("#tabWeatherUvi-"+r._uId).empty().append(s);r.$element.find("#weatherCube-loaderText-"+r._uId).text(getI18n("weatherCube_getUviParsedFeed",r.options.language))},getWeatherMeteoAlarmData:function(){let t=this,r=0;t.options.debug&&console.info("Updating meteo alarm data!");t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getMeteoFeed",t.options.language));let i=t.options.language;if(i==="sl"?i="si":i==="en"&&(i="uk"),n.inArray(i.toUpperCase(),k)<0){t.options.debug&&console.info("Selected region is invalid: "+i);return}let u=d.replace("{0}",i),f=this.statusLocalStorage("meteo_data");if(f){let n=localStorage.getItem("meteo_data"),i=JSON.parse(n);t.parseMeteoAlarmData(i,"MeteoAlarm from local storage: ");t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getMeteoCacheFeed",t.options.language))}else t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getMeteoLiveFeed",t.options.language)),n.ajax({url:"https://mcx-systems.net/proxy.php?url="+encodeURIComponent(u),dataType:"json",cache:!0,success:function(n){if(n===null)return!0;t.options.debug&&console.info("Success, getting data for: "+u);t.setLocalStorage("meteo_data",JSON.stringify(n),t.options.cache);let i=localStorage.getItem("meteo_data"),f=JSON.parse(i);return t.parseMeteoAlarmData(f,"New MeteoAlarm Feed Data: "),t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getMeteoSuccessFeed",t.options.language)),r=0,!0},error:function(i,f,e){if(t.options.debug&&(console.error("Error getting JSON data from: "+u),console.error(e+"\r"+i.statusText+"\r"+i.responseText)),t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getMeteoErrorFeed",t.options.language)),r++,r<=t.options.retryLimit){t.$element.find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getFeedTryAgain",t.options.language));let i=this;return setTimeout(function(){n.ajax(i)},2e3),!1}return!1}})},parseMeteoAlarmData:function(t,i){let r=this;r._dataResult.length=0;this.options.debug&&console.log(i,t);let f=t.items[0].description,u=this.addTableDataToArray(f);n.each(t.items,function(n){n>0&&r._dataResult.push(t.items[n])});let e='<div id="alertsToday-'+r._uId+'" class="carousel-item active"><a href="#" class="weatherCube-alertDialog weatherCubeTooltip"><span class="mr-2">'+getI18n("weatherCube_"+r.deCapitalizeFirstLetter(u[0][0]),r.options.language)+"<\/span><\/a>"+u[1][0]+u[1][1]+u[1][2]+"<\/div>",o='<div id="#alertsTomorrow-'+r._uId+'" class="carousel-item"><a href="#" class="weatherCube-alertDialog weatherCubeTooltip"><span class="mr-2">'+getI18n("weatherCube_"+r.deCapitalizeFirstLetter(u[0][2]),r.options.language)+"<\/span><\/a>"+u[1][4]+u[1][5]+u[1][6]+"<\/div>";r.$element.find("#currentWeatherInterval-"+r._uId+" .carousel-inner").empty().append(e).append(o);r.$element.find("#weatherCube-loaderText-"+r._uId).text(getI18n("weatherCube_getMeteoParsedFeed",r.options.language));r.options.debug&&console.info("Successfully updated alerts list!")},locationErrorCallback:function(n){switch(n.code){case n.PERMISSION_DENIED:this.options.debug&&(console.info("--------------------------------------------"),console.error("User denied the request for Geolocation. Location was set to default."),console.info("--------------------------------------------"));break;case n.POSITION_UNAVAILABLE:this.options.debug&&(console.info("--------------------------------------------"),console.error("Location information is unavailable. Location was set to default."),console.info("--------------------------------------------"));break;case n.TIMEOUT:this.options.debug&&(console.info("--------------------------------------------"),console.error("The request to get user location timed out. Location was set to default."),console.info("--------------------------------------------"));break;default:this.options.debug&&(console.info("--------------------------------------------"),console.error("An unknown error occurred. Location was set to default."),console.info("--------------------------------------------"))}},setClocksTime:function(n){const t=new Date,h=i.querySelector(".wcLocal-seconds-hand"),c=i.querySelector(".wcLocal-minutes-hand"),l=i.querySelector(".wcLocal-hours-hand"),a=i.querySelector(".wcFirst-seconds-hand"),v=i.querySelector(".wcFirst-minutes-hand"),y=i.querySelector(".wcFirst-hours-hand"),p=i.querySelector(".wcSecond-seconds-hand"),w=i.querySelector(".wcSecond-minutes-hand"),b=i.querySelector(".wcSecond-hours-hand"),r=t.getSeconds(),k=r*6+90;h.style.transform=`rotate(${k}deg)`;const u=t.toLocaleString("en-US",{timeZone:n.options.firstTimezone[1],second:"numeric"}),d=u*6+90;a.style.transform=`rotate(${d}deg)`;const f=t.toLocaleString("en-US",{timeZone:n.options.secondTimezone[1],second:"numeric"}),g=f*6+90;p.style.transform=`rotate(${g}deg)`;const e=t.getMinutes(),nt=e*6+r/10+90;c.style.transform=`rotate(${nt}deg)`;const o=t.toLocaleString("en-US",{timeZone:n.options.firstTimezone[1],minute:"numeric"}),tt=o*6+u/10+90;v.style.transform=`rotate(${tt}deg)`;const s=t.toLocaleString("en-US",{timeZone:n.options.secondTimezone[1],minute:"numeric"}),it=s*6+f/10+90;w.style.transform=`rotate(${it}deg)`;const rt=t.getHours(),ut=rt*30+e/2+90;l.style.transform=`rotate(${ut}deg)`;const ft=t.toLocaleString("en-US",{timeZone:n.options.firstTimezone[1],hour12:!1,hour:"numeric"}),et=ft*30+o/2+90;y.style.transform=`rotate(${et}deg)`;const ot=t.toLocaleString("en-US",{timeZone:n.options.secondTimezone[1],hour12:!1,hour:"numeric"}),st=ot*30+s/2+90;b.style.transform=`rotate(${st}deg)`},getUserLanguage:function(){let n="",i=t.location.search;if(i){i.substring(0,1)==="?"&&(i=i.substring(1));let t=i.split("&");for(let i=0;i<t.length;i++){let r=t[i].split("=");if(r[0]==="lang"){n=r[1];break}}}if(!n){let t=navigator.language||navigator,i=t.split("-");n=i[0]}return n!=="en"&&n!=="sl"&&(n="en"),n},generateUnitIcon:function(n){return n==="imperial"?"wi-fahrenheit":"wi-celsius"},getMoonPhase:function(n,t,i){(typeof n!="number"||n<0)&&console.error("Year must be a number greater or equal to 0");(typeof t!="number"||t<1||t>12)&&console.error("Month must be a number between 1 and 12");(typeof i!="number"||i<1||i>31)&&console.error("Month must be a number between 1 and 31");let v=this.getJulianDayNumber(n,t,i),e=Math.floor((n-1900)*12.3685),h=(n-1899.5)/100,o=Math.pow(h,2),c=Math.pow(h,3),p=2415020+29*e,w=.0001178*o-155e-9*c+.75933+.53058868*e-.000837*h+.000335*o,b=360*this.getFractionalPart(e*.08084821133)+359.2242-333e-7*o-347e-8*c,k=360*this.getFractionalPart(e*.07171366128)+306.0253+.0107306*o+1236e-8*c,d=360*this.getFractionalPart(e*.08519585128)+21.2964-.0016528*o-239e-8*c,u=0,l=0,y,r,s,f,a;while(l<v)r=w+1.530588*u,s=this.degreesToRadians(b+u*29.10535608),f=this.degreesToRadians(k+u*385.81691806),a=this.degreesToRadians(d+u*390.67050646),r-=.4068*Math.sin(f)+(.1734-.000393*h*Math.sin(s)),r+=.0161*Math.sin(2*f)+.0104*Math.sin(2*a),r-=.0074*Math.sin(s-f)-.0051*Math.sin(s+f),r+=.0021*Math.sin(2*s)+.001*Math.sin(2*a-f),r+=.5/1440,y=l,l=p+28*u+Math.floor(r),u+=1;return this.options.debug&&console.info("Moon phase successfully calculated."),(v-y)%30},getJulianDayNumber:function(n,t,i){let u=Math.floor((14-t)/12),r=n+4800-u,f=t+12*u-3;return i+Math.floor((153*f+2)/5)+365*r+Math.floor(r/4)-Math.floor(r/100)+Math.floor(r/400)-32045},degreesToRadians:function(n){return n*Math.PI/180},getFractionalPart:function(n){return Math.abs(n)-Math.floor(n)},getDegreePart:function(n){return n.replace(/\?/g,"&deg;")},getZodiacSign:function(n,t,i){let r="";switch(n){case 1:r=t>=1&&t<=19?i[9]:i[10];break;case 2:r=t>=1&&t<=18?i[10]:i[11];break;case 3:r=t>=21?i[0]:i[11];break;case 4:r=t>=1&&t<=19?i[0]:i[1];break;case 5:r=t>=1&&t<=20?i[1]:i[2];break;case 6:r=t>=1&&t<=21?i[2]:i[3];break;case 7:r=t>=1&&t<=22?i[3]:i[4];break;case 8:r=t>=1&&t<=22?i[4]:i[5];break;case 9:r=t>=1&&t<=22?i[5]:i[6];break;case 10:r=t>=1&&t<=22?i[6]:i[7];break;case 11:r=t>=1&&t<=21?i[7]:i[8];break;case 12:r=t>=1&&t<=21?i[8]:i[9]}return this.options.debug&&console.info("Zodiac sign match found."),r},dayToString:function(n){switch(n){case 0:return getI18n("weatherCube_sunday",this.options.language);case 1:return getI18n("weatherCube_monday",this.options.language);case 2:return getI18n("weatherCube_tuesday",this.options.language);case 3:return getI18n("weatherCube_wednesday",this.options.language);case 4:return getI18n("weatherCube_thursday",this.options.language);case 5:return getI18n("weatherCube_friday",this.options.language);case 6:return getI18n("weatherCube_saturday",this.options.language);default:return null}},formatTime:function(n,t,i=false){let u,c;c=i?n*1e3:n;let r=new Date(c),o=(r.getDate()<10?"0":"")+r.getDate(),s=(r.getMonth()<9?"0":"")+(r.getMonth()+1),h=r.getFullYear(),f=r.getHours(),e=r.getMinutes();e<10&&(e="0"+e);f<10&&(f="0"+f);switch(t){case 0:u=f+":"+e+" - "+o+"-"+s+"-"+h;break;case 1:u=s+"/"+o+"/"+h;break;case 2:u=o+"-"+s+"-"+h;break;default:u=f+":"+e}return u},createUniqId:function(n){const t="_0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".split("");n||(n=Math.floor(Math.random()*t.length));let i="";for(let r=0;r<n;r++)i+=t[Math.floor(Math.random()*t.length)];return i},separateForecastByDay:function(n){let t=new Array(5);for(let n=0;n<t.length;n++)t[n]={date:null,forecast:[]};let[i,r]=[0];const u=new Date;for(let f=0;f<n.length;f++){let o=n[f];const e=new Date(`${o.dt_txt.replace(/-/g,"/")}`);if(e.getDate()!==u.getDate()){if(r&&(i+=r.getDate()!==e.getDate()?1:0),i>4)break;t[i].date||(t[i].date=e);t[i].forecast.push(o);r=e}}return t.slice(-1)[0].forecast.length===0&&t.splice(-1),t},consolidateToDailyForecast:function(n){let t=n.forecast,u=this.getWeatherId(t),f=this.getWeatherPrefix(t),e=this.getWeatherDay(t),o=this.getWeatherMain(t),s=this.getWeatherIcon(t),h=this.getWeatherDesc(t),c=this.getAveHumidity(t),l=this.getAvePressure(t),a=this.getAveWindSpeed(t),v=this.getAveWindDeg(t),[i,r]=this.getHighLowTemp(t),y=Math.round(r+i/2);return{id:u,prefix:f,date:n.date,day:e,main:o,icon:s,desc:h,humidity:c,pressure:l,windSpeed:a,windDeg:v,low:i,high:r,ave:y}},getWeatherId:function(n){let t={};return n.forEach(n=>{let i=n.weather[0].id;t[`${i}`]=t[`${i}`]?t[`${i}`]+1:1}),Object.keys.length===1?Object.keys(t)[0]:Object.keys(t).reduce((n,i)=>t[n]>t[i]?n:i)},getWeatherPrefix:function(n){let t={};return n.forEach(n=>{let i=n.sys.pod;t[`${i}`]=t[`${i}`]?t[`${i}`]+1:1}),Object.keys.length===1?Object.keys(t)[0]:Object.keys(t).reduce((n,i)=>t[n]>t[i]?n:i)},getWeatherDay:function(n){let i=this,t={};return n.forEach(n=>{let r=i.dayToString(new Date(n.dt*1e3).getDay(),i.options.language);t[`${r}`]=t[`${r}`]?t[`${r}`]+1:1}),Object.keys.length===1?Object.keys(t)[0]:Object.keys(t).reduce((n,i)=>t[n]>t[i]?n:i)},getWeatherMain:function(n){let t={};return n.forEach(n=>{let i=n.weather[0].main;t[`${i}`]=t[`${i}`]?t[`${i}`]+1:1}),Object.keys.length===1?Object.keys(t)[0]:Object.keys(t).reduce((n,i)=>t[n]>t[i]?n:i)},getWeatherIcon:function(n){let t={};return n.forEach(n=>{let i=n.weather[0].icon;t[`${i}`]=t[`${i}`]?t[`${i}`]+1:1}),Object.keys.length===1?Object.keys(t)[0]:Object.keys(t).reduce((n,i)=>t[n]>t[i]?n:i)},getWeatherDesc:function(n){let t={};return n.forEach(n=>{let i=n.weather[0].description;t[`${i}`]=t[`${i}`]?t[`${i}`]+1:1}),Object.keys.length===1?Object.keys(t)[0]:Object.keys(t).reduce((n,i)=>t[n]>t[i]?n:i)},getHighLowTemp:function(n){let t=0,i=0;return n.forEach((n,r)=>{let u=n.main.temp;r===0?[t,i]=[u,u]:u<t?t=u:u>i&&(i=u)}),[t,i]},getAveHumidity:function(n){return Math.round(n.reduce((n,t)=>n+t.main.humidity,0)/n.length)},getAvePressure:function(n){return Math.round(n.reduce((n,t)=>n+t.main.pressure,0)/n.length)},getAveWindSpeed:function(n){return Math.round(n.reduce((n,t)=>n+t.wind.speed,0)/n.length)},getAveWindDeg:function(n){return Math.round(n.reduce((n,t)=>n+t.wind.deg,0)/n.length)},capitalizeFirstLetter:function(n){return n.replace(/^(.)/g,n[0].toUpperCase())},deCapitalizeFirstLetter:function(n){return n.replace(/^(.)/g,n[0].toLowerCase())},statusLocalStorage:function(n){let i=new Date,u=Math.round(+i/1e3),t=localStorage.getItem(n+"_time");return(t===r||t===null)&&(t=0),t<u?(this.removeLocalStorage(n),0):1},setLocalStorage:function(n,t,i){(i===r||i===null)&&(i=3600);let u=new Date,f=Math.round(u.setSeconds(u.getSeconds()+i)/1e3);localStorage.setItem(n,t);localStorage.setItem(n+"_time",f.toString())},removeLocalStorage:function(n){localStorage.removeItem(n);localStorage.removeItem(n+"_time")},loadImage:function(t){let i=new Image;if(typeof t!="object"||t===null){console.log("loadImage(): Please pass valid options!");return}typeof t.beforeLoad=="function"&&t.beforeLoad({imgUrl:t.imgUrl,customData:t.customData});n(i).one("load",function(){let n={success:!0,url:t.imgUrl,imageElem:i,customData:t.customData};typeof t.complete=="function"&&t.complete(n);typeof t.success=="function"&&t.success(n)}).one("error",function(){let n={success:!1,url:t.imgUrl,imageElem:i,customData:t.customData};typeof t.complete=="function"&&t.complete(n);typeof t.error=="function"&&t.error(n)}).attr("src",t.imgUrl).each(function(){this.complete&&n(this).trigger("load")})},getIPLocation:function(){let t=this,i=0,r;(t.options.apiGeoKey||t.options.apiGeoKey!=="")&&(r=t.options.apiGeoKey+"/",n.ajax({url:"https://geoip-db.com/json/"+r,dataType:"json",success:function(r){t.options.debug&&(console.info("Success, getting data for: https://geoip-db.com/json/"),console.log(r));t.options.city&&t.options.city!==""?n(t.element).find("#weatherCube-city-"+t._uId).text(t.options.city):n(t.element).find("#weatherCube-city-"+t._uId).text(r.city);i=0;n(t.element).find("#weatherCube-state-"+t._uId).text(r.state);n(t.element).find("#weatherCube-country-"+t._uId).text(r.country_code);n(t.element).find("#weatherCube-detectedIP-"+t._uId).text(getI18n("weatherCube_detectedIP",t.options.language)+" "+r.IPv4)},error:function(r,u,f){if(i++,i<=t.options.retryLimit){n(t.element).find("#weatherCube-loaderText-"+t._uId).text(getI18n("weatherCube_getFeedTryAgain",t.options.language));let i=this;setTimeout(function(){n.ajax(i)},2e3);return}t.options.debug&&(console.error("Error getting JSON data from: https://geoip-db.com/json/"),console.error(f+"\r"+r.statusText+"\r"+r.responseText))}}))},addTableDataToArray:function(t){let i=[];return n(t).find("tr").each(function(){let t=[];n(this).find("th, td").each(function(n,i){t.push(i.innerHTML)});i.push(t)}),i},getWindBeaufort:function(t){let i=!1;return t=t*3.6,n.each([0,2,6,12,20,29,39,50,62,75,89,103,118],function(n,r){t>r&&(i=n)}),i},getWindDirection:function(n){return n<11.25&&n>348.75?"N":n>11.25&&n<33.75?"NNE":n>33.75&&n<56.25?"NE":n>56.25&&n<78.75?"ENE":n>78.75&&n<101.25?"E":n>101.25&&n<123.75?"ESE":n>123.75&&n<146.25?"SE":n>146.25&&n<191.25?"S":n>191.25&&n<213.75?"SSW":n>213.75&&n<236.25?"SW":n>236.25&&n<258.75?"WSW":n>258.75&&n<281.25?"W":n>281.25&&n<303.75?"WNW":n>303.75&&n<326.25?"NW":"NNW"},getTimezoneName:function(){const i=new Date(Date.UTC(2005,6,30,0,0,0,0)),n=-1*i.getTimezoneOffset(),r=new Date(Date.UTC(2005,12,30,0,0,0,0)),t=-1*r.getTimezoneOffset();return-720===n&&-720===t?"Dateline Standard Time":-660===n&&-660===t?"UTC-11":-660===n&&-660===t?"Samoa Standard Time":-660===n&&-600===t?"Hawaiian Standard Time":-570===n&&-570===t?"Pacific/Marquesas":-480===n&&-540===t?"Alaskan Standard Time":-420===n&&-480===t?"Pacific Standard Time":-420===n&&-420===t?"US Mountain Standard Time":-360===n&&-420===t?"Mountain Standard Time":-360===n&&-360===t?"Central America Standard Time":-300===n&&-360===t?"Central Standard Time":-300===n&&-300===t?"SA Pacific Standard Time":-240===n&&-300===t?"Eastern Standard Time":-270===n&&-270===t?"Venezuela Standard Time":-240===n&&-240===t?"SA Western Standard Time":-240===n&&-180===t?"Central Brazilian Standard Time":-180===n&&-240===t?"Atlantic Standard Time":-180===n&&-180===t?"Montevideo Standard Time":-180===n&&-120===t?"E. South America Standard Time":-150===n&&-210===t?"Mid-Atlantic Standard Time":-120===n&&-180===t?"America/Godthab":-120===n&&-120===t?"SA Eastern Standard Time":-60===n&&-60===t?"Cape Verde Standard Time":0===n&&-60===t?"Azores Daylight Time":0===n&&0===t?"Morocco Standard Time":60===n&&0===t?"GMT Standard Time":60===n&&60===t?"Africa/Algiers":60===n&&120===t?"Namibia Standard Time":120===n&&60===t?"Central European Standard Time":120===n&&120===t?"South Africa Standard Time":180===n&&120===t?"GTB Standard Time":180===n&&180===t?"E. Africa Standard Time":240===n&&180===t?"Russian Standard Time":240===n&&240===t?"Arabian Standard Time":270===n&&210===t?"Iran Standard Time":270===n&&270===t?"Afghanistan Standard Time":300===n&&240===t?"Pakistan Standard Time":300===n&&300===t?"West Asia Standard Time":330===n&&330===t?"India Standard Time":345===n&&345===t?"Nepal Standard Time":360===n&&300===t?"N. Central Asia Standard Time":360===n&&360===t?"Central Asia Standard Time":390===n&&390===t?"Myanmar Standard Time":420===n&&360===t?"North Asia Standard Time":420===n&&420===t?"SE Asia Standard Time":480===n&&420===t?"North Asia East Standard Time":480===n&&480===t?"China Standard Time":540===n&&480===t?"Yakutsk Standard Time":540===n&&540===t?"Tokyo Standard Time":570===n&&570===t?"Cen. Australia Standard Time":570===n&&630===t?"Australia/Adelaide":600===n&&540===t?"Asia/Yakutsk":600===n&&600===t?"E. Australia Standard Time":600===n&&660===t?"AUS Eastern Standard Time":630===n&&660===t?"Australia/Lord_Howe":660===n&&600===t?"Tasmania Standard Time":660===n&&660===t?"West Pacific Standard Time":690===n&&690===t?"Central Pacific Standard Time":720===n&&660===t?"Magadan Standard Time":720===n&&720===t?"Fiji Standard Time":720===n&&780===t?"New Zealand Standard Time":765===n&&825===t?"Pacific/Chatham":780===n&&780===t?"Tonga Standard Time":840===n&&840===t?"Pacific/Kiritimati":"US/Pacific"}});n.fn.weatherCube=function(t){return this.each(function(){n.data(this,"plugin_"+s)||n.data(this,"plugin_"+s,new y(this,t))}),this};n.fn.weatherCube.defaults={apiKey:null,apiGeoKey:"699283e0-b3ab-11e9-97d7-d7584e8de765",apiWindyKey:null,city:null,latitude:null,longitude:null,language:null,wInterval:72e5,units:"imperial",theme:"light",icons:"default",firstTimezone:["Tokyo","Asia/Tokyo"],secondTimezone:["Los Angeles","America/Los_Angeles"],alertsInterval:6e3,retryLimit:3,satImageEnabled:!0,satImageSize:"2",satImageLocations:[],quakesPeriod:"week",debug:!0,cache:120,async:!0,onComplete:null,onError:null}})(jQuery,window,document);